<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="java8æ–°ç‰¹æ€§åŸç†ä»¥åŠå®æˆ˜åº”ç”¨-lambdaå‡½æ•°å¼ç¼–ç¨‹ä¸æ—¥æœŸç¯‡, å°å¼ å“¥blog">
    <meta name="description" content="1:ç®€ä»‹ç›®å‰æˆªæ­¢2021å¹´9æœˆjavaæœ€æ–°çš„jdkç‰ˆæœ¬ä¸º17,è€Œæˆ‘ä»¬ç›®å‰å¤§éƒ¨åˆ†å…¬å¸ç°åœ¨çš„javaé¡¹ç›®éƒ½è¿˜åœ¨è¿è¡Œçš„æ˜¯java8çš„ç‰ˆæœ¬,å¯¹äºæˆ‘ä»¬ç›®å‰çš„é¡¹ç›®è€Œè¨€,java8å·²ç»èƒ½å¤Ÿæ»¡è¶³æˆ‘ä»¬å¤§éƒ¨åˆ†å·¥ä½œä¸­çš„åº”ç”¨åœºæ™¯ã€‚è€Œä¸”æˆªæ­¢ç›®å‰ä¸ºæ­¢oracleå…¬å¸è¿˜">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>java8æ–°ç‰¹æ€§åŸç†ä»¥åŠå®æˆ˜åº”ç”¨-lambdaå‡½æ•°å¼ç¼–ç¨‹ä¸æ—¥æœŸç¯‡ | å°å¼ å“¥blog</title>
    <link rel="icon" type="image/png" href="/images/avatar.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">
    
    <script src="/libs/jquery/jquery.min.js"></script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7226904841878107" crossorigin="anonymous"></script>
<meta name="generator" content="Hexo 5.3.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
<link rel="alternate" href="/atom.xml" title="å°å¼ å“¥blog" type="application/atom+xml">
<link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head>


<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper head-container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/images/avatar.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">å°å¼ å“¥blog</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>é¦–é¡µ</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>æ ‡ç­¾</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>åˆ†ç±»</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>å½’æ¡£</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>å…³äº</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>å‹æƒ…é“¾æ¥</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="æœç´¢" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>

<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/images/avatar.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">å°å¼ å“¥blog</div>
        <div class="logo-desc">
            
            åŒ—å†¥æœ‰é±¼,å…¶åä¸ºé²²,é²²ä¹‹å¤§,ä¸çŸ¥å…¶å‡ åƒé‡Œä¹Ÿ;åŒ–è€Œä¸ºé¸Ÿ,å…¶åä¸ºé¹.
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			é¦–é¡µ
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			æ ‡ç­¾
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			åˆ†ç±»
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			å½’æ¡£
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			å…³äº
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			å‹æƒ…é“¾æ¥
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/blinkfox/hexo-theme-matery" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>

        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/blinkfox/hexo-theme-matery" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/2.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">java8æ–°ç‰¹æ€§åŸç†ä»¥åŠå®æˆ˜åº”ç”¨-lambdaå‡½æ•°å¼ç¼–ç¨‹ä¸æ—¥æœŸç¯‡</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        margin: 35px 0 15px 0;
        padding-left: 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        height: calc(100vh - 250px);
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #toc-content .is-active-link::before {
        background-color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- æ–‡ç« å†…å®¹è¯¦æƒ… -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/Java8-lambda/">
                                <span class="chip bg-color">Java8 lambda</span>
                            </a>
                        
                            <a href="/tags/Stream-Programming/">
                                <span class="chip bg-color">Stream Programming</span>
                            </a>
                        
                            <a href="/tags/LocalDate%E3%80%81LocalTime%E3%80%81Instant%E3%80%81Duration/">
                                <span class="chip bg-color">LocalDateã€LocalTimeã€Instantã€Duration</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/Jdk8-lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F/" class="post-category">
                                Jdk8 lambdaè¡¨è¾¾å¼
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>å‘å¸ƒæ—¥æœŸ:&nbsp;&nbsp;
                    2021-10-10
                </div>
                

                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-check fa-fw"></i>æ›´æ–°æ—¥æœŸ:&nbsp;&nbsp;
                    2021-10-09
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>æ–‡ç« å­—æ•°:&nbsp;&nbsp;
                    10.3k
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-clock fa-fw"></i>é˜…è¯»æ—¶é•¿:&nbsp;&nbsp;
                    43 åˆ†
                </div>
                

                
                    <div id="busuanzi_container_page_pv" class="info-break-policy">
                        <i class="far fa-eye fa-fw"></i>é˜…è¯»æ¬¡æ•°:&nbsp;&nbsp;
                        <span id="busuanzi_value_page_pv"></span>
                    </div>
				
            </div>

        </div>
        <hr class="clearfix">
        <div class="card-content article-card-content">
            <div id="articleContent">
                <h2 id="1-ç®€ä»‹"><a href="#1-ç®€ä»‹" class="headerlink" title="1:ç®€ä»‹"></a>1:ç®€ä»‹</h2><p>ç›®å‰æˆªæ­¢2021å¹´9æœˆjavaæœ€æ–°çš„jdkç‰ˆæœ¬ä¸º17,è€Œæˆ‘ä»¬ç›®å‰å¤§éƒ¨åˆ†å…¬å¸ç°åœ¨çš„javaé¡¹ç›®éƒ½è¿˜åœ¨è¿è¡Œçš„æ˜¯java8çš„ç‰ˆæœ¬,å¯¹äºæˆ‘ä»¬ç›®å‰çš„é¡¹ç›®è€Œè¨€,java8å·²ç»èƒ½å¤Ÿæ»¡è¶³æˆ‘ä»¬å¤§éƒ¨åˆ†å·¥ä½œä¸­çš„åº”ç”¨åœºæ™¯ã€‚è€Œä¸”æˆªæ­¢ç›®å‰ä¸ºæ­¢oracleå…¬å¸è¿˜ä»åœ¨ç»§ç»­ç»´æŠ¤ç€java8çš„æ›´æ–°æ“ä½œã€‚å…¶å®java8æ—©åœ¨2014å¹´å°±å·²ç»æ¨å‡ºäº†å‘å‹ç‰ˆã€‚é‚£ä¹ˆjava8éƒ½æœ‰å“ªäº›æ–°ç‰¹æ€§å‘¢?æˆ‘ä»¬æ˜¯å¦éƒ½ä¸€ä¸€æŒæ¡äº†ï¼Ÿæˆ‘æƒ³å¦‚æœæˆ‘ä»¬éƒ½æŒæ¡å¹¶ç†ŸçŸ¥äº†java8çš„æ–°ç‰¹æ€§ä»¥åŠåº”ç”¨æŠ€å·§ä¹‹å,ä¸€å®šä¼šå¯¹æˆ‘ä»¬æ—¥å¸¸çš„å¼€å‘æ•ˆç‡ä¼šæœ‰æˆ–å¤šæˆ–å°‘çš„å¸®åŠ©,æå‡æˆ‘ä»¬çš„æ’¸ç æ•ˆç‡,é¿å…è¸©å‘ã€‚è§„é¿é¡¹ç›®ä¸­ä¸€äº›ä¸å¿…è¦çš„é£é™©ã€‚æ€»ä¹‹æˆ‘ä»¬å¯ä»¥è¿™ä¹ˆæƒ³,å¦‚æœæˆ‘ä»¬éƒ½ä¸äº†è§£java8æ–°ç‰¹æ–°çš„é­…åŠ›,åˆæ€ä¼šä½“éªŒåˆ°java14çš„å¿«ä¹ã€‚(å“ˆå“ˆğŸ˜,é¢˜å¤–è¯)</p>
<h2 id="2-æ–°ç‰¹æ€§ä»‹ç»ä¸åºè¨€"><a href="#2-æ–°ç‰¹æ€§ä»‹ç»ä¸åºè¨€" class="headerlink" title="2:æ–°ç‰¹æ€§ä»‹ç»ä¸åºè¨€"></a>2:æ–°ç‰¹æ€§ä»‹ç»ä¸åºè¨€</h2><p>åœ¨å¼€å§‹ä»‹ç»java8æ–°ç‰¹æ€§ä¹‹å‰,å¿…é¡»å…ˆå¼•å‡ºä¸€ç¯‡oracleå®˜æ–¹éå¸¸å…·æœ‰æƒå¨çš„<a target="_blank" rel="noopener" href="https://www.oracle.com/technetwork/java/javase/8-whats-new-2157071.html">java8æ–°ç‰¹æ€§(ç›¸å¯¹äºjava8ä»¥å‰çš„ç‰ˆæœ¬)</a>å…¶å®å¯ä»¥å‚è€ƒæˆ‘ä»¬å¦‚ä¸‹è¿™å¼ å›¾<br><img src="/images/java8-lambda-with-date-process/jdk1.8-new-characteristic.png" alt="JDK8æ–°ç‰¹æ€§.png"><br>ç®€å•ä»‹ç»jdepsç±»ä¾èµ–åˆ†æå™¨å·¥å…·çš„ä½¿ç”¨ã€‚ç€é‡è®²è§£Lambdaç‰¹æ€§å’ŒStramã€æ—¥æœŸ,é…åˆèµ·æ¥ç”¨å¯ä»¥æå¤§æé«˜ç”Ÿäº§åŠ›ï¼Œå†™å‡ºé«˜æ•ˆç‡ã€å¹²å‡€ã€ç®€æ´çš„ä»£ç ã€‚</p>
<h2 id="3-jdepså·¥å…·çš„ä½¿ç”¨"><a href="#3-jdepså·¥å…·çš„ä½¿ç”¨" class="headerlink" title="3:jdepså·¥å…·çš„ä½¿ç”¨"></a>3:jdepså·¥å…·çš„ä½¿ç”¨</h2><p>ç†Ÿæ‚‰javaçš„å°ä¼™ä¼´åº”è¯¥æ¸…æ¥šjdkåœ¨é»˜è®¤ç»™æˆ‘ä»¬è‡ªå¸¦äº†ä¸€äº›æ–¹ä¾¿çš„toolsæ‰§è¡Œå·¥å…·å¦‚:<br>jps:æ˜¯JDK 1.5æä¾›çš„ä¸€ä¸ªæ˜¾ç¤ºå½“å‰æ‰€æœ‰javaè¿›ç¨‹pidçš„å‘½ä»¤ï¼Œç®€å•å®ç”¨ï¼Œéå¸¸é€‚åˆåœ¨linux/unixå¹³å°ä¸Šç®€å•å¯Ÿçœ‹å½“å‰javaè¿›ç¨‹çš„ä¸€äº›ç®€å•æƒ…å†µã€‚</p>
<p>javac: è¯¥å·¥å…·å¯ä»¥å°†åç¼€åä¸º.javaçš„æºæ–‡ä»¶ç¼–è¯‘ä¸ºåç¼€åä¸º.classçš„å¯ä»¥è¿è¡ŒäºJavaè™šæ‹Ÿæœºçš„å­—èŠ‚ç .</p>
<p>java: æ‰§è¡Œå¯åŠ¨javaæœåŠ¡,å¯ä»¥æ‰§è¡Œ.classåç¼€æ–‡ä»¶æˆ–è€…æ˜¯jar file</p>
<p>javap:javapæ˜¯jdkè‡ªå¸¦çš„åè§£æå·¥å…·ã€‚å®ƒçš„ä½œç”¨å°±æ˜¯æ ¹æ®classå­—èŠ‚ç æ–‡ä»¶ï¼Œåè§£æå‡ºå½“å‰ç±»å¯¹åº”çš„codeåŒºï¼ˆæ±‡ç¼–æŒ‡ä»¤ï¼‰ã€æœ¬åœ°å˜é‡è¡¨ã€å¼‚å¸¸è¡¨å’Œä»£ç è¡Œåç§»é‡æ˜ å°„è¡¨ã€å¸¸é‡æ± ç­‰ç­‰ä¿¡æ¯ã€‚</p>
<p>jjs ç­‰ç­‰â€¦..<br>è¿™æ ·çš„å‘½ä»¤å·¥å…·æœ‰å¥½å¤š,æˆ‘ä»¬æ¥ä¸‹æ¥çœ‹ä¸‹jdeps</p>
<pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">//å°†javaæ–‡ä»¶ç¼–è¯‘ä¸ºclassæ–‡ä»¶</span>
javac <span class="token operator">/</span>Users<span class="token operator">/</span>xiaozhangge<span class="token operator">/</span>ideaProjects<span class="token operator">/</span>java8feature<span class="token operator">/</span>src<span class="token operator">/</span>main<span class="token operator">/</span>java<span class="token operator">/</span>com<span class="token operator">/</span>xes<span class="token operator">/</span>sample<span class="token operator">/</span>function<span class="token operator">/</span>OptionalTest<span class="token punctuation">.</span>java
<span class="token comment" spellcheck="true">//jdepså‘½ä»¤æ‰§è¡Œå¯ä»¥çœ‹åˆ°classçš„ä¾èµ–å…³ç³»</span>
jdeps <span class="token operator">/</span>Users<span class="token operator">/</span>xiaozhangge<span class="token operator">/</span>ideaProjects<span class="token operator">/</span>java8feature<span class="token operator">/</span>src<span class="token operator">/</span>main<span class="token operator">/</span>java<span class="token operator">/</span>com<span class="token operator">/</span>xes<span class="token operator">/</span>sample<span class="token operator">/</span>function<span class="token operator">/</span>OptionalTest<span class="token punctuation">.</span><span class="token keyword">class</span>
<span class="token class-name">OptionalTest<span class="token punctuation">.</span>class</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token operator">/</span>Library<span class="token operator">/</span>Java<span class="token operator">/</span>JavaVirtualMachines<span class="token operator">/</span>jdk1<span class="token number">.8</span><span class="token punctuation">.</span>0_231<span class="token punctuation">.</span>jdk<span class="token operator">/</span>Contents<span class="token operator">/</span>Home<span class="token operator">/</span>jre<span class="token operator">/</span>lib<span class="token operator">/</span>rt<span class="token punctuation">.</span>jar
   com<span class="token punctuation">.</span>xes<span class="token punctuation">.</span>sample<span class="token punctuation">.</span><span class="token function">function</span> <span class="token punctuation">(</span>OptionalTest<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
      <span class="token operator">-</span><span class="token operator">></span> java<span class="token punctuation">.</span>io
      <span class="token operator">-</span><span class="token operator">></span> java<span class="token punctuation">.</span>lang
      <span class="token operator">-</span><span class="token operator">></span> java<span class="token punctuation">.</span>time
      <span class="token operator">-</span><span class="token operator">></span> java<span class="token punctuation">.</span>time<span class="token punctuation">.</span>format
      <span class="token operator">-</span><span class="token operator">></span> java<span class="token punctuation">.</span>time<span class="token punctuation">.</span>temporal
<span class="token comment" spellcheck="true">//ä¸ä»…å¯ä»¥åˆ†æclassæ–‡ä»¶è¿˜å¯ä»¥åˆ†æjaråŒ…,æ„Ÿå…´è¶£çš„å°ä¼™ä¼´å¯ä»¥è‡ªè¡Œå°è¯•</span></code></pre>
<h2 id="4-Streamæµç¼–ç¨‹å®æˆ˜"><a href="#4-Streamæµç¼–ç¨‹å®æˆ˜" class="headerlink" title="4:Streamæµç¼–ç¨‹å®æˆ˜"></a>4:Streamæµç¼–ç¨‹å®æˆ˜</h2><p>ç°åœ¨æˆ‘ä»¬å¼€å§‹è¿›å…¥jdk1.8 streamæµç¼–ç¨‹,è¿™æ˜¯jdk1.8ä¸­æœ€å¤§çš„äº®ç‚¹,ä¹Ÿæ˜¯æœ€æœ‰ç”¨çš„ä¸€ä¸ªç‰¹æ€§ã€‚<br>æ¦‚å¿µ:<br>  é¦–å…ˆstreamæ˜¯ä¸€ä¸ªé«˜çº§çš„è¿­ä»£å™¨,å•å‘,ä¸å¯å¾€å¤,æ•°æ®åªèƒ½éå†ä¸€æ¬¡,éå†è¿‡ä¸€æ¬¡åå³ç”¨å°½äº†,å°±å¥½æ¯”æµæ°´ä»é¢å‰æµè¿‡,ä¸€å»ä¸å¤è¿”ã€‚å®ƒä¸æ˜¯ä¸€ä¸ªæ•°æ®ç»“æ„,ä¹Ÿä¸æ˜¯ä¸€ä¸ªé›†åˆ,å®ƒä¸ä¼šå­˜æ”¾æ•°æ®,streamæœ€å…³æ³¨çš„äº‹æƒ…<br>æ˜¯å¦‚ä½•å°†æ•°æ®è¿›è¡Œé«˜æ•ˆçš„å¤„ç†,å®ƒå…¶å®å°±æ˜¯å°†æ•°æ®åœ¨æµæ°´çº¿ä¸€æ ·çš„ç¯å¢ƒä¸­è¿›è¡Œå¤„ç†(parallelStream)ã€‚<br>è€Œå’Œä¼ ç»Ÿè¿­ä»£å™¨åˆä¸åŒçš„æ˜¯,Streamå¯ä»¥å¹¶è¡ŒåŒ–æ“ä½œ,è¿­ä»£å™¨åªèƒ½å‘½ä»¤å¼åœ°ã€ä¸²è¡ŒåŒ–æ“ä½œã€‚é¡¾åæ€ä¹‰,å½“ä½¿ç”¨ä¸²è¡Œæ–¹å¼å»éå†æ—¶,æ¯ä¸ªitemè¯»å®Œåå†è¯»ä¸‹ä¸€ä¸ª itemã€‚è€Œä½¿ç”¨å¹¶è¡Œå»éå†æ—¶,æ•°æ®ä¼šè¢«åˆ†æˆå¤šä¸ªæ®µï¼Œ<br>å…¶ä¸­æ¯ä¸€ä¸ªéƒ½åœ¨ä¸åŒçš„çº¿ç¨‹ä¸­å¤„ç†,ç„¶åå°†ç»“æœä¸€èµ·è¾“å‡ºã€‚Streamçš„å¹¶è¡Œæ“ä½œä¾èµ–äºJava7ä¸­å¼•å…¥çš„Fork/Joinæ¡†æ¶ï¼ˆJSR166yï¼‰æ¥æ‹†åˆ†ä»»åŠ¡å’ŒåŠ é€Ÿå¤„ç†è¿‡ç¨‹ã€‚</p>
<h3 id="4-1-åˆè¯†Stream"><a href="#4-1-åˆè¯†Stream" class="headerlink" title="4.1:åˆè¯†Stream:"></a>4.1:åˆè¯†Stream:</h3><pre class=" language-java"><code class="language-java"><span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span>IntStream<span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StreamDemeo2</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//ä½¿ç”¨Streamå†…éƒ¨è¿­ä»£</span>
        <span class="token comment" spellcheck="true">//mapå°±æ˜¯ä¸­é—´æ“ä½œ(è¿”å›Streamçš„æ“ä½œ)</span>
        <span class="token comment" spellcheck="true">//sumå°±æ˜¯ç»ˆæ­¢æ“ä½œ</span>
         <span class="token keyword">int</span> sum <span class="token operator">=</span> IntStream<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>i <span class="token operator">-</span><span class="token operator">></span> i <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>sum<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> intNum <span class="token operator">=</span> IntStream<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>StreamDemeo2<span class="token operator">:</span><span class="token operator">:</span>integerNum<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>intNum<span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æƒ°æ€§æ±‚å€¼å°±æ˜¯æœ€ç»ˆæ²¡æœ‰è°ƒç”¨çš„æƒ…å†µä¸‹,ä¸­é—´æ“ä½œä¸ä¼šè¢«æ‰§è¡Œ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        IntStream<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>StreamDemeo2<span class="token operator">:</span><span class="token operator">:</span>integerNum<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment" spellcheck="true">/**
     * æ±‚å€¼è¿ç®—
     *
     * @param i
     * @return
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">integerNum</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ‰§è¡Œäº†ä¹˜ä»¥2æ“ä½œ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> i <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>é€šè¿‡ä»¥ä¸Šçš„ä¾‹å­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°,å¦‚æœæ–¹æ³•è¿”å›çš„æ•°æ®ç±»å‹æ˜¯streamæµå¯¹è±¡,é‚£ä¹ˆé»˜è®¤ç¨‹åºæ˜¯ä¸ä¼šåšä»»ä½•æ“ä½œçš„,åªæœ‰çœŸæ­£æœ€åæœ‰å–å€¼æ“ä½œæ‰ä¼šè¿›è¡Œä¸­é—´è¿‡ç¨‹çš„é€»è¾‘è¿ç®—ã€‚</p>
<h3 id="4-2-Streamæµç¼–ç¨‹åˆ›å»º"><a href="#4-2-Streamæµç¼–ç¨‹åˆ›å»º" class="headerlink" title="4.2:Streamæµç¼–ç¨‹åˆ›å»º:"></a>4.2:Streamæµç¼–ç¨‹åˆ›å»º:</h3><table>
    <tbody><tr bgcolor="gray">
        <td>ç±»åˆ«</td> 
        <td>ç›¸å…³æ–¹æ³•</td> 
   </tr>
   <tr>
        <td>é›†åˆ</td> 
        <td>Collection.stream/parallelStream</td> 
   </tr>
   <tr>
        <td>æ•°ç»„</td> 
        <td>Arrays.stream</td> 
   </tr>
    <tr>
        <td rowspan="2">æ•°å­—Stream</td>    
        <td>IntSream/LongStream</td>  
    </tr>
    <tr>
        <td>Random.ins/longs/doubles</td>  
    </tr>
<tr>
        <td>è‡ªå·±åˆ›å»º</td> 
        <td>Stream.generate/iterate</td> 
   </tr>
</tbody></table>

<pre class=" language-java"><code class="language-java"><span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>Arrays<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>List<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>Random<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span>IntStream<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span>Stream<span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StreamDemo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        List<span class="token operator">&lt;</span>String<span class="token operator">></span> list <span class="token operator">=</span> Arrays<span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//ä»ç»“åˆåˆ›å»º'</span>
        list<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        list<span class="token punctuation">.</span><span class="token function">parallelStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//ä»æ•°ç»„åˆ›å»º</span>
        Arrays<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//åˆ›å»ºæ•°å­—æµ</span>
        IntStream<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        IntStream<span class="token punctuation">.</span><span class="token function">rangeClosed</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//ä½¿ç”¨randomåˆ›å»ºä¸€ä¸ªæ— é™æµ</span>
        <span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ints</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Random random<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//è‡ªå·±äº§ç”Ÿæµ</span>
        Stream<span class="token punctuation">.</span><span class="token function">generate</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">></span>random<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<h3 id="4-3-Streamæµç¼–ç¨‹-ä¸­é—´æ“ä½œ"><a href="#4-3-Streamæµç¼–ç¨‹-ä¸­é—´æ“ä½œ" class="headerlink" title="4.3:Streamæµç¼–ç¨‹-ä¸­é—´æ“ä½œ"></a>4.3:Streamæµç¼–ç¨‹-ä¸­é—´æ“ä½œ</h3><table>
    <tbody><tr>
        <td colspan="2">ç›¸å…³æ–¹æ³•</td> 
        <td>æè¿°</td> 
   </tr>
    <tr>
        <td rowspan="5">æ— çŠ¶æ€æ“ä½œ</td>    
        <td>map/mapToXxx</td>  
        <td rowspan="5">æ— çŠ¶æ€å°±è¡¨ç¤ºæˆ‘å½“å‰çš„æ“ä½œè·Ÿå…¶å®ƒå…ƒç´ çš„å‰åæ²¡æœ‰ä¾èµ–å…³ç³»</td>   
    </tr>
    <tr>
        <td>flatMap/flatMapToXxx</td>  
    </tr>
    <tr>
        <td>filter</td>  
    </tr>
<tr>
        <td>peek</td>  
    </tr>
<tr>
        <td>unordered</td>  
    </tr>
 <tr>
        <td rowspan="3">æœ‰çŠ¶æ€æ“ä½œ</td>    
        <td>distinct</td>  
        <td rowspan="3">æœ‰çŠ¶æ€çš„ç»“æœéœ€è¦ä¾èµ–äºå…¶å®ƒå…ƒç´ </td>   
    </tr>
  <tr>
        <td>sorted</td>  
    </tr>  
<tr>
        <td>limit/skip</td>  
    </tr>
</tbody></table>


<pre class=" language-java"><code class="language-java"><span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>Random<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span>Stream<span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StreamDemo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        String str <span class="token operator">=</span> <span class="token string">"my name is 007"</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//è¾“å‡ºæ¯ä¸ªå•è¯çš„é•¿åº¦</span>
        Stream<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>world <span class="token operator">-</span><span class="token operator">></span> world<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>System<span class="token punctuation">.</span>out<span class="token operator">:</span><span class="token operator">:</span>println<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//è¾“å‡ºç¬¦åˆé•¿åº¦çš„å•è¯</span>
        Stream<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>world <span class="token operator">-</span><span class="token operator">></span> world<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>System<span class="token punctuation">.</span>out<span class="token operator">:</span><span class="token operator">:</span>println<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//é•¿åº¦å¤§äº3å•è¯çš„é•¿åº¦åˆ†åˆ«æœ‰å“ªäº›</span>
        Stream<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>world <span class="token operator">-</span><span class="token operator">></span> world<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">3</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>world <span class="token operator">-</span><span class="token operator">></span> world<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>System<span class="token punctuation">.</span>out<span class="token operator">:</span><span class="token operator">:</span>println<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//flatMapæ“ä½œ</span>
        Stream<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">flatMap</span><span class="token punctuation">(</span>s <span class="token operator">-</span><span class="token operator">></span> s<span class="token punctuation">.</span><span class="token function">chars</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">boxed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>System<span class="token punctuation">.</span>out<span class="token operator">:</span><span class="token operator">:</span>println<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//peekæ“ä½œ peekä¸»è¦ç”¨äºdebug æ˜¯ä¸­é—´æ“ä½œ è€ŒforEachæ˜¯ç»ˆæ­¢æ“ä½œ</span>
        Stream<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">peek</span><span class="token punctuation">(</span>System<span class="token punctuation">.</span>out<span class="token operator">:</span><span class="token operator">:</span>println<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>System<span class="token punctuation">.</span>out<span class="token operator">:</span><span class="token operator">:</span>println<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//limitä½¿ç”¨ä¸»è¦ç”¨äºæ— é™æµ</span>
        <span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ints</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>i <span class="token operator">-</span><span class="token operator">></span> i <span class="token operator">></span> <span class="token number">100</span> <span class="token operator">&amp;&amp;</span> i <span class="token operator">&lt;</span> <span class="token number">10000</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>System<span class="token punctuation">.</span>out<span class="token operator">:</span><span class="token operator">:</span>println<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<h3 id="4-4-Streamæµç¼–ç¨‹-ç»ˆæ­¢æ“ä½œ"><a href="#4-4-Streamæµç¼–ç¨‹-ç»ˆæ­¢æ“ä½œ" class="headerlink" title="4.4:Streamæµç¼–ç¨‹-ç»ˆæ­¢æ“ä½œ"></a>4.4:Streamæµç¼–ç¨‹-ç»ˆæ­¢æ“ä½œ</h3><table>
    <tbody><tr>
        <td colspan="2">ç›¸å…³æ–¹æ³•</td> 
        <td>æè¿°</td> 
   </tr>
   <tr>
        <td rowspan="4">éçŸ­è·¯æ“ä½œ</td> 
        <td>forEach/forEachOrderd</td> 
        <td rowspan="4">åªæœ‰å°†æ‰€æœ‰çš„æ•°æ®è¿›è¡Œæ±‡æ€»å®Œæ¯•æ‰ä¼šä¸­æ–­æµç¨‹</td>    
   </tr>
    <tr> 
        <td>collect/toArray</td>  
    </tr>
    <tr>
        <td>reduce</td>  
    </tr>
    <tr>
        <td>min/max/count</td>  
    </tr>
 <tr>
        <td rowspan="2">çŸ­è·¯æ“ä½œ</td> 
        <td>findFirst/findAny</td> 
        <td rowspan="2">æˆ‘ä»¬ä¸éœ€è¦æ‰€æœ‰çš„ç»“æœè®¡ç®—å®Œå°±å¯ä»¥ç»“æŸè¿™ä¸ªæµçš„æ“ä½œ</td>    
   </tr>
    <tr> 
        <td>allMatch/anyMatch/noneMatch</td>  
    </tr>
</tbody></table>


<pre class=" language-java"><code class="language-java"><span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>Comparator<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>List<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>Optional<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>OptionalInt<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>Random<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span>Collectors<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span>Stream<span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StreamDemo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        String str <span class="token operator">=</span> <span class="token string">"my name is 007"</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"=======================éçŸ­è·¯æ“ä½œ===================="</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//ä½¿ç”¨å¹¶è¡Œæµæ“ä½œ</span>
        str<span class="token punctuation">.</span><span class="token function">chars</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parallel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>i <span class="token operator">-</span><span class="token operator">></span> System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"i = "</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span> i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//ä½¿ç”¨forEachOrderedæ¥ä¿è¯æœ‰åº</span>
        str<span class="token punctuation">.</span><span class="token function">chars</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parallel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEachOrdered</span><span class="token punctuation">(</span>i <span class="token operator">-</span><span class="token operator">></span> System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"i = "</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span> i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//æ”¶é›†list</span>
        List<span class="token operator">&lt;</span>String<span class="token operator">></span> collect <span class="token operator">=</span> Stream<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span>Collectors<span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//reduceç»“æœé›†</span>
        Optional<span class="token operator">&lt;</span>String<span class="token operator">></span> reduce <span class="token operator">=</span> Stream<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span>s1<span class="token punctuation">,</span> s2<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> s1 <span class="token operator">+</span> <span class="token string">"|"</span> <span class="token operator">+</span> s2<span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>reduce<span class="token punctuation">.</span><span class="token function">orElse</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//maxæ“ä½œ</span>
        Stream<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>Comparator<span class="token punctuation">.</span><span class="token function">comparingInt</span><span class="token punctuation">(</span>String<span class="token operator">:</span><span class="token operator">:</span>length<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"=======================çŸ­è·¯æ“ä½œ===================="</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        OptionalInt first <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ints</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">findFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>first<span class="token punctuation">.</span><span class="token function">orElse</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<h3 id="4-5-Streamæµç¼–ç¨‹-å¹¶è¡Œæµ"><a href="#4-5-Streamæµç¼–ç¨‹-å¹¶è¡Œæµ" class="headerlink" title="4.5:Streamæµç¼–ç¨‹-å¹¶è¡Œæµ"></a>4.5:Streamæµç¼–ç¨‹-å¹¶è¡Œæµ</h3><pre class=" language-java"><code class="language-java"><span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span>ForkJoinPool<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span>TimeUnit<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span>IntStream<span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StreamDemo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">//åŒæ­¥æ‰§è¡Œ</span>
        IntStream<span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">peek</span><span class="token punctuation">(</span>StreamDemo<span class="token operator">:</span><span class="token operator">:</span>debug<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//å¹¶è¡Œæµæ‰§è¡Œ</span>
        IntStream<span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parallel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">peek</span><span class="token punctuation">(</span>StreamDemo<span class="token operator">:</span><span class="token operator">:</span>debug<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//å…ˆå¹¶è¡Œåœ¨ä¸²è¡Œ</span>
        <span class="token comment" spellcheck="true">//ç»“è®º:å¤šæ¬¡è°ƒç”¨parallelå’Œsequential,ä»¥æœ€åä¸€æ¬¡è°ƒç”¨ä¸ºå‡†</span>
        IntStream<span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>
                <span class="token comment" spellcheck="true">//è°ƒç”¨paralleläº§ç”Ÿå¹¶è¡Œæµ</span>
                <span class="token punctuation">.</span><span class="token function">parallel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">peek</span><span class="token punctuation">(</span>StreamDemo<span class="token operator">:</span><span class="token operator">:</span>debug<span class="token punctuation">)</span>
                <span class="token comment" spellcheck="true">//è°ƒç”¨sequentialäº§ç”Ÿä¸²è¡Œæµ</span>
                <span class="token punctuation">.</span><span class="token function">sequential</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">peek</span><span class="token punctuation">(</span>StreamDemo<span class="token operator">:</span><span class="token operator">:</span>debug2<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">//å¹¶è¡Œæµä½¿ç”¨çš„çº¿ç¨‹æ± ä¸ºForkJoinPool.commonPool</span>
        <span class="token comment" spellcheck="true">//é»˜è®¤çº¿ç¨‹æ± æ•°æ˜¯å½“å‰æœºå™¨çš„cpuä¸ªæ•°,å¯ä»¥é€šè¿‡ä»¥ä¸‹å‚æ•°è¿›è¡Œä¿®æ”¹çº¿ç¨‹æ•°,æˆ‘ä»¬å¯ä»¥é€šè¿‡java.util.concurrent.ForkJoinPoolç±»çš„</span>
        <span class="token comment" spellcheck="true">//makeCommonPool()æ–¹æ³•è¿›è¡Œå‚è€ƒ:</span>
        System<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">"java.util.concurrent.ForkJoinPool.common.parallelism"</span><span class="token punctuation">,</span> <span class="token string">"20"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        IntStream<span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parallel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">peek</span><span class="token punctuation">(</span>StreamDemo<span class="token operator">:</span><span class="token operator">:</span>debug<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">//ä½¿ç”¨è‡ªå·±çš„çº¿ç¨‹æ± ,ä¸ä½¿ç”¨é»˜è®¤çš„,é˜²æ­¢ä»»åŠ¡è¢«é˜»å¡</span>
        ForkJoinPool pool <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ForkJoinPool</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        pool<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> IntStream<span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parallel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">peek</span><span class="token punctuation">(</span>StreamDemo<span class="token operator">:</span><span class="token operator">:</span>debug<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        pool<span class="token punctuation">.</span><span class="token function">shutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>pool<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                pool<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">debug</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>Thread<span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"debug"</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            TimeUnit<span class="token punctuation">.</span>SECONDS<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">debug2</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        System<span class="token punctuation">.</span>err<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"debug"</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            TimeUnit<span class="token punctuation">.</span>SECONDS<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span></code></pre>
<h3 id="4-6-Streamæµç¼–ç¨‹-æ”¶é›†å™¨"><a href="#4-6-Streamæµç¼–ç¨‹-æ”¶é›†å™¨" class="headerlink" title="4.6:Streamæµç¼–ç¨‹-æ”¶é›†å™¨"></a>4.6:Streamæµç¼–ç¨‹-æ”¶é›†å™¨</h3><p>æ”¶é›†å™¨è¨€å¤–ä¹‹æ„å°±æ˜¯è¦å°†æˆ‘ä»¬æµå¤„ç†çš„æ•°æ®æ”¶é›†èµ·æ¥ã€‚å®ƒå¯ä»¥è¿”å›Listã€Mapç­‰ã€‚ä½¿ç”¨æ”¶é›†å™¨çš„åœ°æ–¹æ¯”è¾ƒå¤š,æ¯”å¦‚sum/count/distinct/group by</p>
<pre class=" language-java"><code class="language-java"><span class="token keyword">import</span> lombok<span class="token punctuation">.</span>Data<span class="token punctuation">;</span>
<span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>commons<span class="token punctuation">.</span>collections4<span class="token punctuation">.</span>MapUtils<span class="token punctuation">;</span>

<span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>Arrays<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>IntSummaryStatistics<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>List<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>Map<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>Set<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>TreeSet<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span>Collectors<span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">/**
 * æ€§åˆ«
 */</span>
<span class="token keyword">enum</span> Gender <span class="token punctuation">{</span>
    MALE<span class="token punctuation">,</span> FEMALE
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">/**
 * ç­çº§
 */</span>
<span class="token keyword">enum</span> Grade <span class="token punctuation">{</span>
    ONE<span class="token punctuation">,</span> TWO<span class="token punctuation">,</span> THREE<span class="token punctuation">,</span> FOUR<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">/**
 * å­¦ç”Ÿ å¯¹è±¡
 */</span>
<span class="token annotation punctuation">@Data</span>
<span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">/**
     * å§“å
     */</span>
    <span class="token keyword">private</span> String name<span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">/**
     * å¹´é¾„
     */</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> age<span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">/**
     * æ€§åˆ«
     */</span>
    <span class="token keyword">private</span> Gender gender<span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">/**
     * ç­çº§
     */</span>
    <span class="token keyword">private</span> Grade grade<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token function">Student</span><span class="token punctuation">(</span>String name<span class="token punctuation">,</span> <span class="token keyword">int</span> age<span class="token punctuation">,</span> Gender gender<span class="token punctuation">,</span> Grade grade<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>gender <span class="token operator">=</span> gender<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>grade <span class="token operator">=</span> grade<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> String <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">"[name="</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">", age="</span> <span class="token operator">+</span> age <span class="token operator">+</span> <span class="token string">", gender="</span> <span class="token operator">+</span> gender
                <span class="token operator">+</span> <span class="token string">", grade="</span> <span class="token operator">+</span> grade <span class="token operator">+</span> <span class="token string">"]"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StreamDemo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">// æµ‹è¯•æ•°æ®</span>
        List<span class="token operator">&lt;</span>Student<span class="token operator">></span> students <span class="token operator">=</span> Arrays<span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span>
                <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">"å°æ˜"</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> Gender<span class="token punctuation">.</span>MALE<span class="token punctuation">,</span> Grade<span class="token punctuation">.</span>ONE<span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">"å¤§æ˜"</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> Gender<span class="token punctuation">.</span>MALE<span class="token punctuation">,</span> Grade<span class="token punctuation">.</span>THREE<span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">"å°ç™½"</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> Gender<span class="token punctuation">.</span>FEMALE<span class="token punctuation">,</span> Grade<span class="token punctuation">.</span>TWO<span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">"å°é»‘"</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">,</span> Gender<span class="token punctuation">.</span>FEMALE<span class="token punctuation">,</span> Grade<span class="token punctuation">.</span>FOUR<span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">"å°çº¢"</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> Gender<span class="token punctuation">.</span>FEMALE<span class="token punctuation">,</span> Grade<span class="token punctuation">.</span>THREE<span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">"å°é»„"</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">,</span> Gender<span class="token punctuation">.</span>MALE<span class="token punctuation">,</span> Grade<span class="token punctuation">.</span>ONE<span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">"å°é’"</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">,</span> Gender<span class="token punctuation">.</span>FEMALE<span class="token punctuation">,</span> Grade<span class="token punctuation">.</span>THREE<span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">"å°ç´«"</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> Gender<span class="token punctuation">.</span>FEMALE<span class="token punctuation">,</span> Grade<span class="token punctuation">.</span>TWO<span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">"å°ç‹"</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> Gender<span class="token punctuation">.</span>MALE<span class="token punctuation">,</span> Grade<span class="token punctuation">.</span>ONE<span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">"å°æ"</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> Gender<span class="token punctuation">.</span>MALE<span class="token punctuation">,</span> Grade<span class="token punctuation">.</span>ONE<span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">"å°é©¬"</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">,</span> Gender<span class="token punctuation">.</span>FEMALE<span class="token punctuation">,</span> Grade<span class="token punctuation">.</span>FOUR<span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">"å°åˆ˜"</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">,</span> Gender<span class="token punctuation">.</span>MALE<span class="token punctuation">,</span> Grade<span class="token punctuation">.</span>FOUR<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">// å¾—åˆ°æ‰€æœ‰å­¦ç”Ÿçš„å¹´é¾„åˆ—è¡¨</span>
        <span class="token comment" spellcheck="true">// s -> s.getAge() --> Student::getAge , ä¸ä¼šå¤šç”Ÿæˆä¸€ä¸ªç±»ä¼¼ lambda$0è¿™æ ·çš„å‡½æ•°</span>
        Set<span class="token operator">&lt;</span>Integer<span class="token operator">></span> ages <span class="token operator">=</span> students<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>Student<span class="token operator">:</span><span class="token operator">:</span>getAge<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span>Collectors<span class="token punctuation">.</span><span class="token function">toCollection</span><span class="token punctuation">(</span>TreeSet<span class="token operator">:</span><span class="token operator">:</span><span class="token keyword">new</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ‰€æœ‰å­¦ç”Ÿçš„å¹´é¾„:"</span> <span class="token operator">+</span> ages<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">// ç»Ÿè®¡æ±‡æ€»ä¿¡æ¯</span>
        IntSummaryStatistics agesSummaryStatistics <span class="token operator">=</span> students<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span>Collectors<span class="token punctuation">.</span><span class="token function">summarizingInt</span><span class="token punctuation">(</span>Student<span class="token operator">:</span><span class="token operator">:</span>getAge<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å¹´é¾„æ±‡æ€»ä¿¡æ¯:"</span> <span class="token operator">+</span> agesSummaryStatistics<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">// åˆ†å—</span>
        Map<span class="token operator">&lt;</span>Boolean<span class="token punctuation">,</span> List<span class="token operator">&lt;</span>Student<span class="token operator">>></span> genders <span class="token operator">=</span> students<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span>
                Collectors<span class="token punctuation">.</span><span class="token function">partitioningBy</span><span class="token punctuation">(</span>s <span class="token operator">-</span><span class="token operator">></span> s<span class="token punctuation">.</span><span class="token function">getGender</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> Gender<span class="token punctuation">.</span>MALE<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">// System.out.println("ç”·å¥³å­¦ç”Ÿåˆ—è¡¨:" + genders);</span>
        MapUtils<span class="token punctuation">.</span><span class="token function">verbosePrint</span><span class="token punctuation">(</span>System<span class="token punctuation">.</span>out<span class="token punctuation">,</span> <span class="token string">"ç”·å¥³å­¦ç”Ÿåˆ—è¡¨"</span><span class="token punctuation">,</span> genders<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">// åˆ†ç»„</span>
        Map<span class="token operator">&lt;</span>Grade<span class="token punctuation">,</span> List<span class="token operator">&lt;</span>Student<span class="token operator">>></span> grades <span class="token operator">=</span> students<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span>Collectors<span class="token punctuation">.</span><span class="token function">groupingBy</span><span class="token punctuation">(</span>Student<span class="token operator">:</span><span class="token operator">:</span>getGrade<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        MapUtils<span class="token punctuation">.</span><span class="token function">verbosePrint</span><span class="token punctuation">(</span>System<span class="token punctuation">.</span>out<span class="token punctuation">,</span> <span class="token string">"å­¦ç”Ÿç­çº§åˆ—è¡¨"</span><span class="token punctuation">,</span> grades<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">// å¾—åˆ°æ‰€æœ‰ç­çº§å­¦ç”Ÿçš„ä¸ªæ•°</span>
        Map<span class="token operator">&lt;</span>Grade<span class="token punctuation">,</span> Long<span class="token operator">></span> gradesCount <span class="token operator">=</span> students<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span>Collectors
                <span class="token punctuation">.</span><span class="token function">groupingBy</span><span class="token punctuation">(</span>Student<span class="token operator">:</span><span class="token operator">:</span>getGrade<span class="token punctuation">,</span> Collectors<span class="token punctuation">.</span><span class="token function">counting</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        MapUtils<span class="token punctuation">.</span><span class="token function">verbosePrint</span><span class="token punctuation">(</span>System<span class="token punctuation">.</span>out<span class="token punctuation">,</span> <span class="token string">"ç­çº§å­¦ç”Ÿä¸ªæ•°åˆ—è¡¨"</span><span class="token punctuation">,</span> gradesCount<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span></code></pre>
<h2 id="5-ä»å…¥é—¨å¼€å§‹æ·±åº¦ç†è§£lambda"><a href="#5-ä»å…¥é—¨å¼€å§‹æ·±åº¦ç†è§£lambda" class="headerlink" title="5:ä»å…¥é—¨å¼€å§‹æ·±åº¦ç†è§£lambda"></a>5:ä»å…¥é—¨å¼€å§‹æ·±åº¦ç†è§£lambda</h2><p>å…ˆä»å‡ æ®µä»£ç ä¸­è¿›è¡Œç®€å•å»ç†è§£:</p>
<pre class=" language-java"><code class="language-java"><span class="token operator">--</span><span class="token operator">--</span>predicate test<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
<span class="token comment" spellcheck="true">//æ–­è¨€æµ‹è¯•,è¾“å…¥ä»»æ„ç±»å‹,è¾“å‡ºboolean</span>
Predicate<span class="token operator">&lt;</span>Integer<span class="token operator">></span> predicate <span class="token operator">=</span> i <span class="token operator">-</span><span class="token operator">></span> i <span class="token operator">></span> <span class="token number">30</span><span class="token punctuation">;</span>
System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>predicate<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//åªæ¥æ”¶intå€¼çš„æ–­è¨€</span>
IntPredicate intPredicate <span class="token operator">=</span> i <span class="token operator">-</span><span class="token operator">></span> <span class="token number">5</span> <span class="token operator">></span> i<span class="token punctuation">;</span>
System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>intPredicate<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//æ¥æ”¶ä¸¤ä¸ªå‚æ•°çš„æ–­è¨€åˆ¤æ–­</span>
BiPredicate<span class="token operator">&lt;</span>Integer<span class="token punctuation">,</span> Integer<span class="token operator">></span> biPredicate <span class="token operator">=</span> <span class="token punctuation">(</span>i1<span class="token punctuation">,</span> i2<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> i1 <span class="token operator">+</span> i2 <span class="token operator">></span> <span class="token number">5</span><span class="token punctuation">;</span>
System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>biPredicate<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<pre class=" language-java"><code class="language-java"><span class="token operator">--</span><span class="token operator">--</span>Consumer testç®€å•ç‰ˆä½¿ç”¨<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
<span class="token comment" spellcheck="true">//æ¶ˆè´¹å‡½æ•°,åªæœ‰è¾“å…¥æ— ä»»ä½•è¿”å›,ç®­å¤´å·¦è¾¹ä¸ºæ–¹æ³•å…¥å‚,ç®­å¤´å³è¾¹ä¸ºå‡½æ•°æ‰§è¡Œè¿‡ç¨‹</span>
Consumer<span class="token operator">&lt;</span>String<span class="token operator">></span> consumer <span class="token operator">=</span> content <span class="token operator">-</span><span class="token operator">></span> System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>
consumer<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token string">"å°å¼ å“¥"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//ç”±äºå·¦ä¾§çš„è¾“å…¥å‚æ•°å’Œå³ä¾§çš„è¾“å‡ºå‚æ•°ç›¸åŒ,æ‰€æˆ‘ä»¬å®Œå…¨å¯ä»¥ä½¿ç”¨æ–¹æ³•å¼•ç”¨çš„æ–¹å¼ç»§ç»­ç²¾ç®€å…¶è¾“å‡º</span>
Consumer<span class="token operator">&lt;</span>String<span class="token operator">></span> simplify <span class="token operator">=</span> System<span class="token punctuation">.</span>out<span class="token operator">:</span><span class="token operator">:</span>println<span class="token punctuation">;</span>
simplify<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token string">"ç®€åŒ–ç‰ˆ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h3 id="5-1-æ—¥å¸¸å¼€å‘ä¸­é«˜çº§ä½¿ç”¨â€”æ–¹æ³•å¼•ç”¨"><a href="#5-1-æ—¥å¸¸å¼€å‘ä¸­é«˜çº§ä½¿ç”¨â€”æ–¹æ³•å¼•ç”¨" class="headerlink" title="5.1:æ—¥å¸¸å¼€å‘ä¸­é«˜çº§ä½¿ç”¨â€”æ–¹æ³•å¼•ç”¨:"></a>5.1:æ—¥å¸¸å¼€å‘ä¸­é«˜çº§ä½¿ç”¨â€”æ–¹æ³•å¼•ç”¨:</h3><pre class=" language-java"><code class="language-java"><span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function<span class="token punctuation">.</span>Consumer<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function<span class="token punctuation">.</span>Function<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function<span class="token punctuation">.</span>IntUnaryOperator<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function<span class="token punctuation">.</span>UnaryOperator<span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> String name <span class="token operator">=</span> <span class="token string">"å°é»„"</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> food <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">/**
     * ç‹—å«çš„é™æ€æ–¹æ³•
     *
     * @param dog
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">bark</span><span class="token punctuation">(</span>Dog dog<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>dog <span class="token operator">+</span> <span class="token string">"å«äº†"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment" spellcheck="true">/**
     * åƒç‹—ç²®
     *
     * @param num
     * @return è¿˜å‰©å¤šå°‘æ–¤
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">eat</span><span class="token punctuation">(</span><span class="token keyword">int</span> num<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"åƒäº†"</span> <span class="token operator">+</span> num <span class="token operator">+</span> <span class="token string">"æ–¤ç‹—ç²®"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>food <span class="token operator">-=</span> num<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>food<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> String <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">//é™æ€æ–¹æ³•å¼•ç”¨</span>
        Consumer<span class="token operator">&lt;</span>Dog<span class="token operator">></span> dogConsumer <span class="token operator">=</span> Dog<span class="token operator">:</span><span class="token operator">:</span>bark<span class="token punctuation">;</span>
        dogConsumer<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//éé™æ€æ–¹æ³•ä½¿ç”¨å¯¹è±¡å®ä¾‹å¼•ç”¨,eatæ–¹æ³•ç¬¦åˆè¾“å…¥/è¾“å‡ºå‚æ•°çš„å½¢å¼</span>
        Function<span class="token operator">&lt;</span>Integer<span class="token punctuation">,</span> Integer<span class="token operator">></span> eatFunction <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token operator">:</span>eat<span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"eatFunctionè¿˜å‰©"</span> <span class="token operator">+</span> eatFunction<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"æ–¤ç‹—ç²®"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//ç”±äºè¾“å…¥å’Œè¾“å‡ºçš„å‚æ•°ç±»å‹ä¸€è‡´,æˆ‘ä»¬å¯ä»¥æ›¿æ¢ä¸ºä¸€å…ƒå‡½æ•°å½¢å¼è°ƒç”¨</span>
        UnaryOperator<span class="token operator">&lt;</span>Integer<span class="token operator">></span> unaryDog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token operator">:</span>eat<span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"unaryDogè¿˜å‰©"</span> <span class="token operator">+</span> unaryDog<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"æ–¤ç‹—ç²®"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//å½“ç„¶jdk1.8é’ˆå¯¹è¾“å…¥å’Œè¾“å‡ºå‚æ•°ç›¸åŒçš„æ“ä½œè¿˜æŒ‡å®šäº†å…·ä½“ç±»å‹çš„ä¸€å…ƒå‡½æ•°,è¿™æ ·æˆ‘ä»¬åœ¨æ“ä½œåŒ»é™¢è¿˜æ˜¯å°±ä¸éœ€è¦å†æŒ‡æ˜å‚å…·ä½“å‚æ•°çš„æ³›å‹</span>
        IntUnaryOperator intUnaryDog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token operator">:</span>eat<span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"intUnaryDogè¿˜å‰©"</span> <span class="token operator">+</span> intUnaryDog<span class="token punctuation">.</span><span class="token function">applyAsInt</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"æ–¤ç‹—ç²®"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>åæ€:ä¸Šé¢çš„ä»£ç ç¤ºä¾‹ä¸­è°ƒç”¨é™æ€æ–¹æ³•å¯ä»¥ä½¿ç”¨Dog::bark;è¿›è¡Œå¼•ç”¨æ–¹æ³•çš„å®ä¾‹ã€‚é‚£ä¹ˆéé™æ€çš„æ–¹æ³•æˆ‘ä»¬è¯¥å¦‚ä½•è¿›è¡Œä½¿ç”¨Dog::eatæ–¹å¼æ¥è¿›è¡Œå¼•ç”¨å‘¢?è¿™é‡Œç‰µæ¶‰åˆ°ä¸åŒçš„è¯­è¨€é‡Œé¢å¯¹thisçš„å®ç°æ–¹æ³•ã€‚æˆ‘ä»¬çŸ¥é“é™æ€æ–¹æ³•å’Œå®ä¾‹æ–¹æ³•çš„åŒºåˆ«æ˜¯å®ä¾‹æ–¹æ³•æœ‰thisï¼Œé™æ€æ–¹æ³•æ²¡æœ‰ã€‚javaé‡Œé¢æ˜¯æ€ä¹ˆæ ·å®ç°thisçš„å‘¢ï¼Ÿ<br><strong>javaé‡Œé¢é»˜è®¤æŠŠthisä½œä¸ºå‚æ•°,æ”¾åˆ°å®ä¾‹(éé™æ€)æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°</strong><br>å°±æ˜¯è¯´</p>
<pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">eat</span><span class="token punctuation">(</span><span class="token keyword">int</span> num<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"åƒäº†"</span> <span class="token operator">+</span> num <span class="token operator">+</span> <span class="token string">"æ–¤ç‹—ç²®"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>food <span class="token operator">-=</span> num<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>food<span class="token punctuation">;</span>
    <span class="token punctuation">}</span></code></pre>
<p>ç¼–è¯‘ä¹‹åå’Œä¸‹é¢è¿™æ ·çš„ä»£ç ç¼–è¯‘ä¹‹åæ˜¯ä¸€æ ·çš„ï¼</p>
<pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">eat</span><span class="token punctuation">(</span>Dog <span class="token keyword">this</span><span class="token punctuation">,</span><span class="token keyword">int</span> num<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"åƒäº†"</span> <span class="token operator">+</span> num <span class="token operator">+</span> <span class="token string">"æ–¤ç‹—ç²®"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>food <span class="token operator">-=</span> num<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>food<span class="token punctuation">;</span>
    <span class="token punctuation">}</span></code></pre>
<p>æ‰§è¡Œ javap -c -s -v -l Dog.class å…¶ä¸­æˆ‘ä»¬çœ‹åˆ°å¦‚ä¸‹:<br><img src="/images/java8-lambda-with-date-process/jdk1.8-lambda-this-problem.png" alt="éé™æ€æ–¹æ³•thisåŸç†.png"><br>æœ¬åœ°å˜é‡è¡¨æŸ¥çœ‹:<br><img src="/images/java8-lambda-with-date-process/jdk1.8-local-variable-table.png" alt="éé™æ€æ–¹æ³•æœ¬åœ°å˜é‡è¡¨.png"><br>æ‰€ä»¥,æˆ‘çš„ç†è§£,javaé‡Œé¢çš„æ‰€æœ‰æ–¹æ³•éƒ½æ˜¯é™æ€æ–¹æ³•,åªæ˜¯æœ‰äº›æ–¹æ³•æœ‰thiså˜é‡,æœ‰äº›æ²¡æœ‰ã€‚<br>æ‰€ä»¥,æˆå‘˜æ–¹æ³•æˆ‘ä»¬ä¹Ÿå¯ä»¥å†™æˆé™æ€æ–¹æ³•çš„æ–¹æ³•å¼•ç”¨ã€‚å¦‚ä¸‹ï¼š</p>
<pre class=" language-java"><code class="language-java"><span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function<span class="token punctuation">.</span>BiFunction<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function<span class="token punctuation">.</span>Function<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function<span class="token punctuation">.</span>Supplier<span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> String name <span class="token operator">=</span> <span class="token string">"å°é»„"</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> food <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token function">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token function">Dog</span><span class="token punctuation">(</span>String name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment" spellcheck="true">/**
     * ç‹—å«çš„é™æ€æ–¹æ³•
     *
     * @param dog
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">bark</span><span class="token punctuation">(</span>Dog dog<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>dog <span class="token operator">+</span> <span class="token string">"å«äº†"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment" spellcheck="true">/**
     * åƒç‹—ç²®
     *
     * @param num
     * @return è¿˜å‰©å¤šå°‘æ–¤
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">eat</span><span class="token punctuation">(</span><span class="token keyword">int</span> num<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"åƒäº†"</span> <span class="token operator">+</span> num <span class="token operator">+</span> <span class="token string">"æ–¤ç‹—ç²®"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>food <span class="token operator">-=</span> num<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>food<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> String <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">//å®ä¾‹æ–¹æ³•é€šè¿‡ç±»åå¼•ç”¨</span>
        BiFunction<span class="token operator">&lt;</span>Dog<span class="token punctuation">,</span> Integer<span class="token punctuation">,</span> Integer<span class="token operator">></span> biFunction <span class="token operator">=</span> Dog<span class="token operator">:</span><span class="token operator">:</span>eat<span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>biFunction<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//æ— å‚æ•°æ„é€ å¼•ç”¨</span>
        Supplier<span class="token operator">&lt;</span>Dog<span class="token operator">></span> supplierDog <span class="token operator">=</span> Dog<span class="token operator">:</span><span class="token operator">:</span><span class="token keyword">new</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>supplierDog<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//å¸¦å‚æ•°çš„æ„é€ å¼•ç”¨</span>
        Function<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Dog<span class="token operator">></span> functionDog <span class="token operator">=</span> Dog<span class="token operator">:</span><span class="token operator">:</span><span class="token keyword">new</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>functionDog<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token string">"å°èŠ±"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<h3 id="5-2-æ—¥å¸¸å¼€å‘ä¸­é«˜çº§ä½¿ç”¨â€”ç±»å‹æ¨æ–­-æœ‰æ—¶éœ€è¦æˆ‘ä»¬è¿›è¡Œæ˜¾ç¤ºè¿›è¡Œç±»å‹è½¬æ¢"><a href="#5-2-æ—¥å¸¸å¼€å‘ä¸­é«˜çº§ä½¿ç”¨â€”ç±»å‹æ¨æ–­-æœ‰æ—¶éœ€è¦æˆ‘ä»¬è¿›è¡Œæ˜¾ç¤ºè¿›è¡Œç±»å‹è½¬æ¢" class="headerlink" title="5.2:æ—¥å¸¸å¼€å‘ä¸­é«˜çº§ä½¿ç”¨â€”ç±»å‹æ¨æ–­(æœ‰æ—¶éœ€è¦æˆ‘ä»¬è¿›è¡Œæ˜¾ç¤ºè¿›è¡Œç±»å‹è½¬æ¢):"></a>5.2:æ—¥å¸¸å¼€å‘ä¸­é«˜çº§ä½¿ç”¨â€”ç±»å‹æ¨æ–­(æœ‰æ—¶éœ€è¦æˆ‘ä»¬è¿›è¡Œæ˜¾ç¤ºè¿›è¡Œç±»å‹è½¬æ¢):</h3><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@FunctionalInterface</span>
<span class="token keyword">interface</span> <span class="token class-name">IMath</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@FunctionalInterface</span>
<span class="token keyword">interface</span> <span class="token class-name">IMath2</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TypeDemo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">//å˜é‡ç±»å‹å®šä¹‰</span>
        IMath lambda <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> x <span class="token operator">+</span> y<span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//æ•°ç»„å®šä¹‰</span>
        IMath<span class="token punctuation">[</span><span class="token punctuation">]</span> lambdas <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> x <span class="token operator">+</span> y<span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//å¼ºè½¬ç±»å‹</span>
        Object lambdaObj <span class="token operator">=</span> <span class="token punctuation">(</span>IMath<span class="token punctuation">)</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> x <span class="token operator">+</span> y<span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//é€šè¿‡æ–¹æ³•è¿”å›ç±»å‹</span>
        IMath createLambda <span class="token operator">=</span> <span class="token function">createLambda</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token function">executeIMath</span><span class="token punctuation">(</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> x <span class="token operator">+</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">executeIMath</span><span class="token punctuation">(</span>IMath iMath<span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>
<span class="token comment" spellcheck="true">//    public static void executeIMath(IMath2 iMath) {</span>
<span class="token comment" spellcheck="true">//</span>
<span class="token comment" spellcheck="true">//    }</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> IMath <span class="token function">createLambda</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> x <span class="token operator">+</span> y<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<h3 id="5-3-æ—¥å¸¸å¼€å‘ä¸­é«˜çº§ä½¿ç”¨â€”å˜é‡å¼•ç”¨"><a href="#5-3-æ—¥å¸¸å¼€å‘ä¸­é«˜çº§ä½¿ç”¨â€”å˜é‡å¼•ç”¨" class="headerlink" title="5.3:æ—¥å¸¸å¼€å‘ä¸­é«˜çº§ä½¿ç”¨â€”å˜é‡å¼•ç”¨:"></a>5.3:æ—¥å¸¸å¼€å‘ä¸­é«˜çº§ä½¿ç”¨â€”å˜é‡å¼•ç”¨:</h3><pre class=" language-java"><code class="language-java"><span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function<span class="token punctuation">.</span>Consumer<span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">VarDemo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">/**
         * åŒ¿åå†…éƒ¨ç±»å¼•ç”¨å¤–éƒ¨å˜é‡ä¸ºä»€ä¹ˆå¿…é¡»æ˜¯final?
         * åŸå› æ˜¯javaçš„ä¼ é€’æ˜¯å€¼ä¼ é€’è€Œä¸æ˜¯å¼•ç”¨ä¼ é€’ã€‚å¦‚æœæ˜¯å€¼ä¼ é€’çš„è¯,å‡è®¾å¤–é¢çš„å‚æ•°å€¼è¿›è¡Œäº†ä¿®æ”¹,
         * é‚£ä¹ˆä¼šå¯¼è‡´å†…éƒ¨ç±»ä¸­çš„è®¡ç®—å®ç°ä¸æ­£ç¡®æ€§ã€‚lambdaä¸ºäº†é¿å…è¿™æ ·çš„é—®é¢˜æ‰€ä»¥éšå¼çš„ç»™ä¸ºå†…éƒ¨ç±»å¤–é¢çš„
         * å˜é‡è®¾ç½®ä¸ºäº†final,å¦‚æœæ˜¯å¼•ç”¨ä¼ é€’,é‚£ä¹ˆåŒ¿åå†…éƒ¨ç±»å°±ä¸éœ€è¦è¿™æ ·çš„è€ƒè™‘äº†ã€‚
         */</span>
        String str <span class="token operator">=</span> <span class="token string">"æˆ‘ä»¬çš„æ—¶é—´"</span><span class="token punctuation">;</span>
        Consumer<span class="token operator">&lt;</span>String<span class="token operator">></span> consumer <span class="token operator">=</span> s <span class="token operator">-</span><span class="token operator">></span> System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s <span class="token operator">+</span> str<span class="token punctuation">)</span><span class="token punctuation">;</span>
        consumer<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token string">"20191022"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>å€¼ä¼ é€’:<br><img src="/images/java8-lambda-with-date-process/jdk1.8-pass-by-value.png" alt="å€¼ä¼ é€’.png"><br>å¼•ç”¨ä¼ é€’:<br><img src="/images/java8-lambda-with-date-process/jdk1.8-pass-by-reference.png" alt="å¼•ç”¨ä¼ é€’.png"></p>
<h3 id="5-4-æ—¥å¸¸å¼€å‘ä¸­é«˜çº§ä½¿ç”¨â€”çº§è”è¡¨è¾¾å¼åŠæŸ¯é‡ŒåŒ–"><a href="#5-4-æ—¥å¸¸å¼€å‘ä¸­é«˜çº§ä½¿ç”¨â€”çº§è”è¡¨è¾¾å¼åŠæŸ¯é‡ŒåŒ–" class="headerlink" title="5.4:æ—¥å¸¸å¼€å‘ä¸­é«˜çº§ä½¿ç”¨â€”çº§è”è¡¨è¾¾å¼åŠæŸ¯é‡ŒåŒ–:"></a>5.4:æ—¥å¸¸å¼€å‘ä¸­é«˜çº§ä½¿ç”¨â€”çº§è”è¡¨è¾¾å¼åŠæŸ¯é‡ŒåŒ–:</h3><p>åœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼ŒæŸ¯é‡ŒåŒ–ï¼ˆè‹±è¯­ï¼šCurryingï¼‰ï¼Œåˆè¯‘ä¸ºå¡ç‘åŒ–æˆ–åŠ é‡ŒåŒ–ï¼Œæ˜¯æŠŠæ¥å—å¤šä¸ªå‚æ•°çš„å‡½æ•°å˜æ¢æˆæ¥å—ä¸€ä¸ªå•ä¸€å‚æ•°ï¼ˆæœ€åˆå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼‰çš„å‡½æ•°ï¼Œå¹¶ä¸”è¿”å›æ¥å—ä½™ä¸‹çš„å‚æ•°è€Œä¸”è¿”å›ç»“æœçš„æ–°å‡½æ•°çš„æŠ€æœ¯ã€‚<br>è¿™ä¸ªæŠ€æœ¯ç”±å…‹é‡Œæ–¯æ‰˜å¼—Â·æ–¯ç‰¹é›·å¥‡ä»¥é€»è¾‘å­¦å®¶å“ˆæ–¯å‡¯å°”Â·åŠ é‡Œå‘½åçš„ï¼Œå°½ç®¡å®ƒæ˜¯Moses SchÃ¶nfinkelå’Œæˆˆç‰¹æ´›å¸ƒÂ·å¼—é›·æ ¼å‘æ˜çš„ã€‚â€”â€“æ‘˜è‡ªç»´åŸºç™¾ç§‘(wikipedia)</p>
<pre class=" language-java"><code class="language-java"><span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function<span class="token punctuation">.</span>Function<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function<span class="token punctuation">.</span>IntFunction<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function<span class="token punctuation">.</span>IntUnaryOperator<span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">/**
 * @Author zyf
 * @Date 2019/12/15 8:50 PM
 * @Description çº§è”è¡¨è¾¾å¼å’ŒæŸ¯é‡ŒåŒ–
 * æŸ¯é‡ŒåŒ–:å°†å¤šä¸ªå‚æ•°çš„å‡½æ•°è½¬æ¢ä¸ºåªæœ‰ä¸€ä¸ªå‚æ•°çš„å‡½æ•°
 * æŸ¯é‡ŒåŒ–çš„ç›®çš„:å‡½æ•°çš„æ ‡å‡†åŒ–
 * é«˜é˜¶å‡½æ•°:è¿”å›å‡½æ•°çš„å‡½æ•°
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CurryDemo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">//å®ç°x+yçš„çº§è”è¡¨è¾¾å¼(åµŒå¥—å¤šå±‚Function)</span>
        Function<span class="token operator">&lt;</span>Integer<span class="token punctuation">,</span> Function<span class="token operator">&lt;</span>Integer<span class="token punctuation">,</span> Integer<span class="token operator">>></span> fun <span class="token operator">=</span> x <span class="token operator">-</span><span class="token operator">></span> y <span class="token operator">-</span><span class="token operator">></span> x <span class="token operator">+</span> y<span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>fun<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        IntFunction<span class="token operator">&lt;</span>IntFunction<span class="token operator">&lt;</span>IntUnaryOperator<span class="token operator">>></span> f <span class="token operator">=</span> x <span class="token operator">-</span><span class="token operator">></span> y <span class="token operator">-</span><span class="token operator">></span> z <span class="token operator">-</span><span class="token operator">></span> <span class="token punctuation">(</span>x <span class="token operator">+</span> y<span class="token punctuation">)</span> <span class="token operator">*</span> z<span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>f<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">applyAsInt</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//54</span>

        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
        Function funObj <span class="token operator">=</span> fun<span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>funObj <span class="token keyword">instanceof</span> <span class="token class-name">Function</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                Object obj <span class="token operator">=</span> funObj<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">Function</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    funObj <span class="token operator">=</span> <span class="token punctuation">(</span>Function<span class="token punctuation">)</span> obj<span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"è°ƒç”¨ç»“æŸäº†"</span> <span class="token operator">+</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<h3 id="5-4-æ—¥å¸¸å¼€å‘ä¸­é«˜çº§ä½¿ç”¨â€”çº§è”è¡¨è¾¾å¼åŠæŸ¯é‡ŒåŒ–-1"><a href="#5-4-æ—¥å¸¸å¼€å‘ä¸­é«˜çº§ä½¿ç”¨â€”çº§è”è¡¨è¾¾å¼åŠæŸ¯é‡ŒåŒ–-1" class="headerlink" title="5.4:æ—¥å¸¸å¼€å‘ä¸­é«˜çº§ä½¿ç”¨â€”çº§è”è¡¨è¾¾å¼åŠæŸ¯é‡ŒåŒ–:"></a>5.4:æ—¥å¸¸å¼€å‘ä¸­é«˜çº§ä½¿ç”¨â€”çº§è”è¡¨è¾¾å¼åŠæŸ¯é‡ŒåŒ–:</h3><p>åœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼ŒæŸ¯é‡ŒåŒ–ï¼ˆè‹±è¯­ï¼šCurryingï¼‰ï¼Œåˆè¯‘ä¸ºå¡ç‘åŒ–æˆ–åŠ é‡ŒåŒ–ï¼Œæ˜¯æŠŠæ¥å—å¤šä¸ªå‚æ•°çš„å‡½æ•°å˜æ¢æˆæ¥å—ä¸€ä¸ªå•ä¸€å‚æ•°ï¼ˆæœ€åˆå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼‰çš„å‡½æ•°ï¼Œå¹¶ä¸”è¿”å›æ¥å—ä½™ä¸‹çš„å‚æ•°è€Œä¸”è¿”å›ç»“æœçš„æ–°å‡½æ•°çš„æŠ€æœ¯ã€‚<br>è¿™ä¸ªæŠ€æœ¯ç”±å…‹é‡Œæ–¯æ‰˜å¼—Â·æ–¯ç‰¹é›·å¥‡ä»¥é€»è¾‘å­¦å®¶å“ˆæ–¯å‡¯å°”Â·åŠ é‡Œå‘½åçš„ï¼Œå°½ç®¡å®ƒæ˜¯Moses SchÃ¶nfinkelå’Œæˆˆç‰¹æ´›å¸ƒÂ·å¼—é›·æ ¼å‘æ˜çš„ã€‚â€”â€“æ‘˜è‡ªç»´åŸºç™¾ç§‘(wikipedia)</p>
<pre class=" language-java"><code class="language-java"><span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function<span class="token punctuation">.</span>Function<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function<span class="token punctuation">.</span>IntFunction<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function<span class="token punctuation">.</span>IntUnaryOperator<span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">/**
 * @Author zyf
 * @Date 2019/12/15 8:50 PM
 * @Description çº§è”è¡¨è¾¾å¼å’ŒæŸ¯é‡ŒåŒ–
 * æŸ¯é‡ŒåŒ–:å°†å¤šä¸ªå‚æ•°çš„å‡½æ•°è½¬æ¢ä¸ºåªæœ‰ä¸€ä¸ªå‚æ•°çš„å‡½æ•°
 * æŸ¯é‡ŒåŒ–çš„ç›®çš„:å‡½æ•°çš„æ ‡å‡†åŒ–
 * é«˜é˜¶å‡½æ•°:è¿”å›å‡½æ•°çš„å‡½æ•°
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CurryDemo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">//å®ç°x+yçš„çº§è”è¡¨è¾¾å¼(åµŒå¥—å¤šå±‚Function)</span>
        Function<span class="token operator">&lt;</span>Integer<span class="token punctuation">,</span> Function<span class="token operator">&lt;</span>Integer<span class="token punctuation">,</span> Integer<span class="token operator">>></span> fun <span class="token operator">=</span> x <span class="token operator">-</span><span class="token operator">></span> y <span class="token operator">-</span><span class="token operator">></span> x <span class="token operator">+</span> y<span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>fun<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        IntFunction<span class="token operator">&lt;</span>IntFunction<span class="token operator">&lt;</span>IntUnaryOperator<span class="token operator">>></span> f <span class="token operator">=</span> x <span class="token operator">-</span><span class="token operator">></span> y <span class="token operator">-</span><span class="token operator">></span> z <span class="token operator">-</span><span class="token operator">></span> <span class="token punctuation">(</span>x <span class="token operator">+</span> y<span class="token punctuation">)</span> <span class="token operator">*</span> z<span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>f<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">applyAsInt</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//54</span>

        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
        Function funObj <span class="token operator">=</span> fun<span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>funObj <span class="token keyword">instanceof</span> <span class="token class-name">Function</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                Object obj <span class="token operator">=</span> funObj<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">Function</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    funObj <span class="token operator">=</span> <span class="token punctuation">(</span>Function<span class="token punctuation">)</span> obj<span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"è°ƒç”¨ç»“æŸäº†"</span> <span class="token operator">+</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<h3 id="6-æ·±å…¥ç†è§£å‡½æ•°å¼æ¥å£-amp-è‡ªå®šä¹‰lambda"><a href="#6-æ·±å…¥ç†è§£å‡½æ•°å¼æ¥å£-amp-è‡ªå®šä¹‰lambda" class="headerlink" title="6:æ·±å…¥ç†è§£å‡½æ•°å¼æ¥å£&amp;è‡ªå®šä¹‰lambda"></a>6:æ·±å…¥ç†è§£å‡½æ•°å¼æ¥å£&amp;è‡ªå®šä¹‰lambda</h3><p>è¦æƒ³çœŸæ­£å½»åº•çš„ç†è§£å‡½æ•°å¼æ¥å£ä»¥åŠlambdaçš„çœŸæ­£å®ç°ç»†èŠ‚åŸç†,æˆ‘ä»¬å¿…é¡»å…ˆå¾—ç†Ÿæ‚‰å’Œç†è§£ä»¥ä¸‹å‡ ä¸ªå‡½æ•°å¼æ¥å£ã€‚</p>
<pre class=" language-java"><code class="language-java">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>functionä¸­å®šä¹‰äº†å‡ ç»„ç±»å‹çš„å‡½æ•°å¼æ¥å£ä»¥åŠé’ˆå¯¹åŸºæœ¬æ•°æ®ç±»å‹çš„å­æ¥å£ã€‚
Predicate <span class="token operator">--</span> ä¼ å…¥ä¸€ä¸ªå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªboolç»“æœ<span class="token punctuation">,</span>æ–¹æ³•ä¸º<span class="token keyword">boolean</span> <span class="token function">test</span><span class="token punctuation">(</span>T t<span class="token punctuation">)</span>
Consumer <span class="token operator">--</span> ä¼ å…¥ä¸€ä¸ªå‚æ•°<span class="token punctuation">,</span>æ— è¿”å›å€¼<span class="token punctuation">,</span>çº¯æ¶ˆè´¹ã€‚ æ–¹æ³•ä¸º<span class="token keyword">void</span> <span class="token function">accept</span><span class="token punctuation">(</span>T t<span class="token punctuation">)</span>
Function <span class="token operator">--</span> ä¼ å…¥ä¸€ä¸ªå‚æ•°<span class="token punctuation">,</span>è¿”å›ä¸€ä¸ªç»“æœ<span class="token punctuation">,</span>æ–¹æ³•ä¸ºR <span class="token function">apply</span><span class="token punctuation">(</span>T t<span class="token punctuation">)</span>
Supplier <span class="token operator">--</span> æ— å‚æ•°ä¼ å…¥<span class="token punctuation">,</span>è¿”å›ä¸€ä¸ªç»“æœ<span class="token punctuation">,</span>æ–¹æ³•ä¸ºT <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
UnaryOperator <span class="token operator">--</span> ä¸€å…ƒæ“ä½œç¬¦<span class="token punctuation">,</span> ç»§æ‰¿Function<span class="token punctuation">,</span>ä¼ å…¥å‚æ•°çš„ç±»å‹å’Œè¿”å›ç±»å‹ç›¸åŒã€‚
BiFunction<span class="token operator">--</span> äºŒå…ƒæ“ä½œç¬¦<span class="token punctuation">,</span> ä¼ å…¥ä¸¤ä¸ªå‚æ•°è¿”å›ä¸€ä¸ªç»“æœã€‚è¿™ä¸ªç»“æœçš„ç±»å‹å¯ä»¥ä¸ä»»ä¸€å‚æ•°çš„ç±»å‹ä¸ç›¸åŒã€‚
BinaryOperator <span class="token operator">--</span> äºŒå…ƒæ“ä½œç¬¦<span class="token punctuation">,</span> ä¼ å…¥çš„ä¸¤ä¸ªå‚æ•°çš„ç±»å‹å’Œè¿”å›ç±»å‹ç›¸åŒ<span class="token punctuation">,</span>ç»§æ‰¿BiFunction</code></pre>
<p><a target="_blank" rel="noopener" href="https://www.runoob.com/java/java8-functional-interfaces.html">è¯¦ç»†æ›´å¤šè¯·å‚è€ƒ</a><br>ä¸‹é¢æˆªå›¾ä¸­åˆ—å‡ºäº†è¿™äº›æ¥å£åœ¨jdk rt.jaråŒ…ä¸‹çš„java.util.functionåŒ…<br><img src="/images/java8-lambda-with-date-process/jdk1.8-lambda-function-detail-info.png" alt="å‡½æ•°è¡¨è¾¾å¼å¸¸ç”¨interfaceæ¥å£.png"></p>
<h3 id="6-1åˆè¯†java-lambdaè¡¨è¾¾å¼"><a href="#6-1åˆè¯†java-lambdaè¡¨è¾¾å¼" class="headerlink" title="6.1åˆè¯†java lambdaè¡¨è¾¾å¼"></a>6.1åˆè¯†java lambdaè¡¨è¾¾å¼</h3><p>æƒ³è¦åˆæ­¥äº†è§£javaä¸­çš„lambdaè¡¨è¾¾å¼,å…ˆæ¥çœ‹ä¸‹ä¸€ä¸ªéå¸¸ç®€å•çš„ä¾‹å­,é€è¿‡ä¾‹å­æ¥ç†Ÿæ‚‰lambdaè¡¨è¾¾å¼çš„ç®€æ´ä¸å¼ºå¤§ã€‚</p>
<pre class=" language-java"><code class="language-java"><span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span>IntStream<span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ArrayMin</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">33</span><span class="token punctuation">,</span> <span class="token number">55</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">55</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">90</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">660</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> min <span class="token operator">=</span> Integer<span class="token punctuation">.</span>MAX_VALUE<span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> num <span class="token operator">:</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>num <span class="token operator">&lt;</span> min<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                min <span class="token operator">=</span> num<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>min<span class="token punctuation">)</span><span class="token punctuation">;</span>
        min <span class="token operator">=</span> IntStream<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAsInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>min<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//å½“ç„¶æ•°æ®é‡è¿‡å¤§çš„è¯æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨å¹¶å‘çš„æ–¹å¼è¿›è¡Œå¤„ç†æˆ‘ä»¬çš„æ•°æ®ä¿¡æ¯</span>
        min <span class="token operator">=</span> IntStream<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parallel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAsInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>min<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>å¯¹ç¨‹åºå‘˜æ¥è¯´æœ€ç›´è§‚çš„æ„Ÿå—å°±æ˜¯ç”¨Lambdaè¡¨è¾¾å¼å¯ä»¥ç®€åŒ–å¾ˆå¤šä»£ç ã€‚ä½¿ç”¨å®ƒå¯ä»¥å¾ˆè½»æ¾çš„å°†å¾ˆå¤šè¡Œä»£ç ç¼©å‡æˆä¸€è¡Œã€‚ä¹Ÿå¯ä»¥æ›´æœ‰æ•ˆæé«˜æˆ‘ä»¬ä»£ç çš„æ‰§è¡Œæ•ˆç‡,Java Lambdaè¡¨è¾¾å¼çš„ä¸€ä¸ªé‡è¦ç”¨æ³•æ˜¯ç®€åŒ–æŸäº›åŒ¿åå†…éƒ¨ç±»(Anonymous Classes)çš„å†™æ³•ã€‚<br>åœ¨jdk1.8ä»¥ä¸‹,æ— æ³•å°†å‡½æ•°ä½œä¸ºå‚æ•°è¿›è¡Œä¼ é€’ç»™ä¸€ä¸ªæ–¹æ³•,ä¹Ÿæ— æ³•å£°æ˜è¿”å›ä¸€ä¸ªå‡½æ•°çš„æ–¹æ³•ã€‚æ‰€ä»¥éœ€è¦lambdaå‡½æ•°å¼ç¼–ç¨‹ã€‚</p>
<h3 id="6-2lambdaåŒ¿åå†…éƒ¨ç±»çŸ¥è¯†ç‚¹"><a href="#6-2lambdaåŒ¿åå†…éƒ¨ç±»çŸ¥è¯†ç‚¹" class="headerlink" title="6.2lambdaåŒ¿åå†…éƒ¨ç±»çŸ¥è¯†ç‚¹:"></a>6.2lambdaåŒ¿åå†…éƒ¨ç±»çŸ¥è¯†ç‚¹:</h3><p>   1:lambdaåŒ¿åå†…éƒ¨ç±»çš„è¿è¡ŒåŸç†<br>            åŒ¿åå†…éƒ¨ç±»ä»ç„¶æ˜¯ä¸€ä¸ªç±»,åªæ˜¯ä¸éœ€è¦ç¨‹åºå‘˜æ˜¾ç¤ºæŒ‡å®šç±»å,ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ä¸ºè¯¥ç±»å–å.å› æ­¤å¦‚æœæœ‰å¦‚ä¸‹å½¢å¼çš„ä»£ç ,ç¼–è¯‘ä¹‹åå°†ä¼šäº§ç”Ÿä¸¤ä¸ªclassæ–‡ä»¶ï¼š</p>
<pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MainAnonymousClass</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Runnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Anonymous Class Thread run()"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>æ‰§è¡Œå‘½ä»¤ javac MainAnonymousClass.java,ç¼–è¯‘ä¹‹åæ–‡ä»¶åˆ†å¸ƒå¦‚ä¸‹,ä¸¤ä¸ªclassæ–‡ä»¶åˆ†åˆ«æ˜¯ä¸»ç±»å’ŒåŒ¿åå†…éƒ¨ç±»äº§ç”Ÿçš„ï¼š<br><img src="/images/java8-lambda-with-date-process/jdk1.8-javac-command-show-detail.png" alt="lambdaåŒ¿åå†…éƒ¨ç±»æ ¸å¿ƒå®ç°.png"><br>è¿›ä¸€æ­¥åˆ†æä¸»ç±»MainAnonymousClass.classçš„å­—èŠ‚ç ,å¯å‘ç°å…¶åˆ›å»ºäº†åŒ¿åå†…éƒ¨ç±»çš„å¯¹è±¡ï¼š</p>
<pre class=" language-java"><code class="language-java">xiaozhanggedeMacBook<span class="token operator">-</span>Pro<span class="token operator">:</span>Desktop xiaozhangge$ javap <span class="token operator">-</span>c MainAnonymousClass<span class="token punctuation">.</span><span class="token keyword">class</span>
<span class="token class-name">Compiled</span> from <span class="token string">"MainAnonymousClass.java"</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MainAnonymousClass</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token function">MainAnonymousClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    Code
       <span class="token number">0</span><span class="token operator">:</span> aload_0
       <span class="token number">1</span><span class="token operator">:</span> invokespecial #<span class="token number">1</span>                  <span class="token comment" spellcheck="true">// Method java/lang/Object."&lt;init>":()V</span>
       <span class="token number">4</span><span class="token operator">:</span> <span class="token keyword">return</span>

  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    Code<span class="token operator">:</span>
       <span class="token number">0</span><span class="token operator">:</span> <span class="token keyword">new</span>           #<span class="token number">2</span>                  <span class="token comment" spellcheck="true">// class java/lang/Thread</span>
       <span class="token number">3</span><span class="token operator">:</span> dup
       <span class="token number">4</span><span class="token operator">:</span> <span class="token keyword">new</span>           #<span class="token number">3</span>                  <span class="token comment" spellcheck="true">// class MainAnonymousClass$1 åˆ›å»ºäº†å†…éƒ¨ç±»å¯¹è±¡</span>
       <span class="token number">7</span><span class="token operator">:</span> dup
       <span class="token number">8</span><span class="token operator">:</span> invokespecial #<span class="token number">4</span>                  <span class="token comment" spellcheck="true">// Method MainAnonymousClass$1."&lt;init>":()V</span>
      <span class="token number">11</span><span class="token operator">:</span> invokespecial #<span class="token number">5</span>                  <span class="token comment" spellcheck="true">// Method java/lang/Thread."&lt;init>":(Ljava/lang/Runnable;)V</span>
      <span class="token number">14</span><span class="token operator">:</span> invokevirtual #<span class="token number">6</span>                  <span class="token comment" spellcheck="true">// Method java/lang/Thread.start:()V</span>
      <span class="token number">17</span><span class="token operator">:</span> <span class="token keyword">return</span>
<span class="token punctuation">}</span></code></pre>
<p>2:lambdaåŒ¿åå†…éƒ¨ç±»thisçš„ä½œç”¨åŸŸ<br>lambdaè¡¨è¾¾å¼æœ€ç»ˆä¼šè¿”å›ä¸€ä¸ªå®ç°äº†æŒ‡å®šæ¥å£çš„å®ä¾‹,çœ‹ä¸Šå»å’Œå†…éƒ¨åŒ¿åç±»å¾ˆåƒ,ä½†æœ‰ä¸€ä¸ªæœ€å¤§çš„åŒºåˆ«å°±æ˜¯ä»£ç é‡Œé¢çš„this,å†…éƒ¨åŒ¿åç±»<br><strong>thisæŒ‡å‘çš„å°±æ˜¯åŒ¿åç±»,è€Œlambdaè¡¨è¾¾å¼é‡Œé¢çš„thisæŒ‡å‘çš„å½“å‰ç±»ã€‚</strong></p>
<pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/**
 * lambdaè¡¨è¾¾å¼çš„this
 *
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ThisDemo</span> <span class="token punctuation">{</span>

  <span class="token keyword">private</span> String name <span class="token operator">=</span> <span class="token string">"ThisDemo"</span><span class="token punctuation">;</span>

  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">// åŒ¿åç±»å®ç°</span>
    <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Runnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

      <span class="token keyword">private</span> String name <span class="token operator">=</span> <span class="token string">"Runnable"</span><span class="token punctuation">;</span>

      <span class="token annotation punctuation">@Override</span>
      <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"è¿™é‡Œçš„thisæŒ‡å‘åŒ¿åç±»:"</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

     <span class="token comment" spellcheck="true">// lambdaå®ç°</span>
    <span class="token comment" spellcheck="true">// ä¸‹é¢ä¼šè‡ªåŠ¨ç”Ÿæˆlambda$0æ–¹æ³•,ç”±äºä½¿ç”¨äº†this,æ‰€ä»¥æ˜¯éstaticæ–¹æ³•</span>
    <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token punctuation">{</span>
      System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"è¿™é‡Œçš„thisæŒ‡å‘å½“å‰çš„ThisDemoç±»:"</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">// lambdaå®ç°</span>
    <span class="token comment" spellcheck="true">// ä¸‹é¢ä¼šè‡ªåŠ¨ç”Ÿæˆlambda$1æ–¹æ³•,ç”±äºæ²¡æœ‰ä½¿ç”¨äº†this,æ‰€ä»¥æ˜¯staticæ–¹æ³•</span>
    <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token punctuation">{</span>
      System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"è¿™é‡Œæ²¡æœ‰å¼•ç”¨this,ç”Ÿæˆçš„lambda1æ–¹æ³•æ˜¯staticçš„"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    ThisDemo demo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThisDemo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    demo<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p><img src="/images/java8-lambda-with-date-process/jdk1.8-javac-class-information.png" alt="ç¼–è¯‘åå­—èŠ‚ç è¯¦æƒ….png"><br>ä½¿ç”¨javap -s -p ç±»å,å¯ä»¥çœ‹å‡ºä¸€ä¸ªæ˜¯static,ä¸€ä¸ªæ˜¯éstaicçš„<br><img src="/images/java8-lambda-with-date-process/jdk1.8-javap-show-class-information.png" alt="javapåç¼–è¯‘è¯¦æƒ….png"><br>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆlambdaè¡¨è¾¾å¼é‡Œé¢çš„thisæŒ‡å‘å½“å‰ç±»çš„åº•å±‚æœºåˆ¶ï¼å› ä¸ºä»£ç å°±æ˜¯åœ¨æœ¬ç±»çš„ä¸€ä¸ªæ–¹æ³•é‡Œé¢æ‰§è¡Œçš„ã€‚<br>é¢å¤–è¯´ä¸€å¥ï¼Œè‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•æ˜¯å¦å¸¦å‚æ•°å–å†³äºlambdaæ˜¯å¦æœ‰å‚æ•°ï¼Œä¾‹å­ä¸­è¡¨è¾¾å¼æ²¡æœ‰å‚æ•°ï¼ˆç®­å¤´å·¦è¾¹æ˜¯ç©ºçš„ï¼‰ï¼Œæ‰€ä»¥è‡ªåŠ¨ç”Ÿæˆçš„ä¹Ÿæ²¡æœ‰ã€‚</p>
<h3 id="6-3è‡ªå®šä¹‰å®ç°lambdaè¡¨è¾¾å¼"><a href="#6-3è‡ªå®šä¹‰å®ç°lambdaè¡¨è¾¾å¼" class="headerlink" title="6.3è‡ªå®šä¹‰å®ç°lambdaè¡¨è¾¾å¼"></a>6.3è‡ªå®šä¹‰å®ç°lambdaè¡¨è¾¾å¼</h3><p>è‡ªå®šä¹‰å‡½æ•°æ¥å£å¾ˆå®¹æ˜“ï¼Œåªéœ€è¦ç¼–å†™ä¸€ä¸ªåªæœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•çš„æ¥å£å³å¯ã€‚</p>
<pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">//æ— å‚æ•°æ ·ä¾‹</span>
<span class="token annotation punctuation">@FunctionalInterface</span>
<span class="token keyword">interface</span> <span class="token class-name">MyInterface</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment" spellcheck="true">/**
 * @Author zyf
 * @Date 2019/12/10 5:01 PM
 * @Description æ— å‚æ•°function
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">NotParamFunctionInterface</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">printContent</span><span class="token punctuation">(</span>MyInterface myInterface<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        myInterface<span class="token punctuation">.</span><span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        NotParamFunctionInterface<span class="token punctuation">.</span><span class="token function">printContent</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyInterface</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"åƒé¥­æ–¹æ³•~~~"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        MyInterface myInterface <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"é»˜è®¤å‡½æ•°æ¥å£å®ç°"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        myInterface<span class="token punctuation">.</span><span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">//æœ‰å‚æ•°æ ·ä¾‹</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>Arrays<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>List<span class="token punctuation">;</span>

<span class="token annotation punctuation">@FunctionalInterface</span>
<span class="token keyword">interface</span> <span class="token class-name">ConsumerInterface</span><span class="token operator">&lt;</span>T<span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">accept</span><span class="token punctuation">(</span>T t<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">default</span> <span class="token keyword">void</span> <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token number">111</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">ParamterCustomInterface</span><span class="token operator">&lt;</span>T<span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> List<span class="token operator">&lt;</span>T<span class="token operator">></span> list<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">myForEach</span><span class="token punctuation">(</span>ConsumerInterface<span class="token operator">&lt;</span>T<span class="token operator">></span> consumer<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment" spellcheck="true">// 1</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span>T t <span class="token operator">:</span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            consumer<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        ParamterCustomInterface<span class="token operator">&lt;</span>String<span class="token operator">></span> stream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ParamterCustomInterface</span><span class="token operator">&lt;</span>String<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        stream<span class="token punctuation">.</span>list <span class="token operator">=</span> Arrays<span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token string">"1"</span><span class="token punctuation">,</span> <span class="token string">"2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        stream<span class="token punctuation">.</span><span class="token function">myForEach</span><span class="token punctuation">(</span>str <span class="token operator">-</span><span class="token operator">></span> System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// ä½¿ç”¨è‡ªå®šä¹‰å‡½æ•°æ¥å£ä¹¦å†™Lambdaè¡¨è¾¾å¼</span>
        ConsumerInterface consumerInterface <span class="token operator">=</span> str <span class="token operator">-</span><span class="token operator">></span> System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
        consumerInterface<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token string">"å‡½æ•°å¼è°ƒç”¨!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>consumerInterface<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getSuperclass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>å…¶å®å¾ˆå¤šjava 1.8ä¸­çš„lambdaè¡¨è¾¾å¼ä½¿ç”¨äº†ä»¥ä¸Šæ–¹å¼è¿›è¡Œå®ç°,æ¯”å¦‚:listâ€“&gt;forEach/Streamâ€”â€“&gt;peek<br><strong>çŸ¥è¯†ç‚¹:</strong><br>1.å¦‚æœä¸€ä¸ªæ¥å£åªæœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•,é‚£ä¹ˆè¯¥æ¥å£å°±æ˜¯ä¸€ä¸ªå‡½æ•°å¼æ¥å£ã€‚<br>2. å¦‚æœæˆ‘ä»¬åœ¨æŸä¸ªæ¥å£ä¸Šå£°æ˜äº†@FunctionalInterfaceæ³¨è§£,é‚£ä¹ˆç¼–è¯‘å™¨å°±ä¼šæŒ‰ç…§å‡½æ•°å¼æ¥å£çš„å®šä¹‰æ¥è¦æ±‚è¯¥æ¥å£ã€‚<br>3. å¦‚æœæŸä¸ªæ¥å£åªæœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•,ä½†æˆ‘ä»¬å¹¶æ²¡æœ‰ç»™æ¥å£å£°æ˜@FunctionalInterfaceæ³¨è§£,é‚£ä¹ˆç¼–è¯‘å™¨ä¾æ—§ä¼šå°†è¯¥æ¥å£çœ‹åšæ˜¯å‡½æ•°å¼æ¥å£ã€‚</p>
<h2 id="7-Optional-ç±»çš„å¼•å…¥"><a href="#7-Optional-ç±»çš„å¼•å…¥" class="headerlink" title="7:Optional ç±»çš„å¼•å…¥"></a>7:Optional ç±»çš„å¼•å…¥</h2><p>Optional ç±»æ˜¯ä¸€ä¸ªå¯ä»¥ä¸ºnullçš„å®¹å™¨å¯¹è±¡ã€‚å¦‚æœå€¼å­˜åœ¨åˆ™isPresent()æ–¹æ³•ä¼šè¿”å›trueï¼Œè°ƒç”¨get()æ–¹æ³•ä¼šè¿”å›è¯¥å¯¹è±¡ã€‚<br>Optional æ˜¯ä¸ªå®¹å™¨ï¼šå®ƒå¯ä»¥ä¿å­˜ç±»å‹Tçš„å€¼ï¼Œæˆ–è€…ä»…ä»…ä¿å­˜nullã€‚Optionalæä¾›å¾ˆå¤šæœ‰ç”¨çš„æ–¹æ³•ï¼Œè¿™æ ·æˆ‘ä»¬å°±ä¸ç”¨æ˜¾å¼è¿›è¡Œç©ºå€¼æ£€æµ‹ã€‚<br>Optional ç±»çš„å¼•å…¥å¾ˆå¥½çš„è§£å†³ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚<br>åœ¨æˆ‘ä»¬çš„å¼€å‘ä¸­ï¼ŒNullPointerExceptionå¯è°“æ˜¯éšæ—¶éšå¤„å¯è§ï¼Œä¸ºäº†é¿å…ç©ºæŒ‡é’ˆå¼‚å¸¸ï¼Œæˆ‘ä»¬å¸¸å¸¸éœ€è¦è¿›è¡Œä¸€äº›é˜²å¾¡å¼çš„æ£€æŸ¥ï¼Œæ‰€ä»¥åœ¨ä»£ç ä¸­å¸¸å¸¸å¯è§if(obj != null) è¿™æ ·çš„åˆ¤æ–­ã€‚å¹¸å¥½åœ¨JDK1.8ä¸­ï¼Œjavaä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªOptionalç±»ï¼ŒOptionalç±»èƒ½è®©æˆ‘ä»¬çœæ‰ç¹ççš„éç©ºçš„åˆ¤æ–­ã€‚ä¸‹é¢å…ˆè¯´ä¸€ä¸‹Optionalä¸­ä¸ºæˆ‘ä»¬æä¾›çš„æ–¹æ³•.<br><img src="/images/java8-lambda-with-date-process/jdk1.8-optional-method-detail-info.png" alt="Optionalç±»ç›¸å…³å¸¸ç”¨æ–¹æ³•.png"><br>ä¸‹é¢æˆ‘ä»¬å†™å‡ ä¸ªä¾‹å­æ¥å…·ä½“çœ‹ä¸€ä¸‹æ¯ä¸ªæ–¹æ³•çš„ä½œç”¨ï¼š<br>of</p>
<pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">//åˆ›å»ºä¸€ä¸ªå€¼ä¸ºå¼ ä¸‰çš„Stringç±»å‹çš„Optional</span>
Optional<span class="token operator">&lt;</span>String<span class="token operator">></span> ofOptional <span class="token operator">=</span> Optional<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">"å¼ ä¸‰"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//å¦‚æœæˆ‘ä»¬ç”¨ofæ–¹æ³•åˆ›å»ºOptionalå¯¹è±¡æ—¶ï¼Œæ‰€ä¼ å…¥çš„å€¼ä¸ºnullï¼Œåˆ™æŠ›å‡ºNullPointerExceptionå¦‚ä¸‹å›¾æ‰€ç¤º</span>
Optional<span class="token operator">&lt;</span>String<span class="token operator">></span> nullOptional <span class="token operator">=</span> Optional<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>null<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p><img src="/images/java8-lambda-with-date-process/jdk1.8-optional-of-example.png" alt="option.off()è¿è¡Œç»“æœ"><br>ofNullable</p>
<pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">//ä¸ºæŒ‡å®šçš„å€¼åˆ›å»ºOptionalå¯¹è±¡ï¼Œä¸ç®¡æ‰€ä¼ å…¥çš„å€¼ä¸ºnullä¸ä¸ºnullï¼Œåˆ›å»ºçš„æ—¶å€™éƒ½ä¸ä¼šæŠ¥é”™</span>
Optional<span class="token operator">&lt;</span>String<span class="token operator">></span> nullOptional <span class="token operator">=</span> Optional<span class="token punctuation">.</span><span class="token function">ofNullable</span><span class="token punctuation">(</span>null<span class="token punctuation">)</span><span class="token punctuation">;</span>
Optional<span class="token operator">&lt;</span>String<span class="token operator">></span> nullOptional <span class="token operator">=</span> Optional<span class="token punctuation">.</span><span class="token function">ofNullable</span><span class="token punctuation">(</span><span class="token string">"lisi"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>empty</p>
<pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">//åˆ›å»ºä¸€ä¸ªç©ºçš„Stringç±»å‹çš„Optionalå¯¹è±¡</span>
Optional<span class="token operator">&lt;</span>String<span class="token operator">></span> emptyOptional <span class="token operator">=</span> Optional<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>get<br>å¦‚æœæˆ‘ä»¬åˆ›å»ºçš„Optionalå¯¹è±¡ä¸­æœ‰å€¼å­˜åœ¨åˆ™è¿”å›æ­¤å€¼ï¼Œå¦‚æœæ²¡æœ‰å€¼å­˜åœ¨ï¼Œåˆ™ä¼šæŠ›å‡ºNoSuchElementExceptionå¼‚å¸¸ã€‚å°demoå¦‚ä¸‹ï¼š</p>
<pre class=" language-java"><code class="language-java">Optional<span class="token operator">&lt;</span>String<span class="token operator">></span> stringOptional <span class="token operator">=</span> Optional<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">"å¼ ä¸‰"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>stringOptional<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p><img src="/images/java8-lambda-with-date-process/jdk1.8-optional-get-example.png" alt="option.get()è¿è¡Œç»“æœ"></p>
<pre class=" language-java"><code class="language-java">Optional<span class="token operator">&lt;</span>String<span class="token operator">></span> emptyOptional <span class="token operator">=</span> Optional<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>emptyOptional<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p><img src="/images/java8-lambda-with-date-process/jdk1.8-optional-empty-example.png" alt="option.empty()è¿è¡Œç»“æœ"><br>orElse<br>å¦‚æœåˆ›å»ºçš„Optionalä¸­æœ‰å€¼å­˜åœ¨ï¼Œåˆ™è¿”å›æ­¤å€¼ï¼Œå¦åˆ™è¿”å›ä¸€ä¸ªé»˜è®¤å€¼</p>
<pre class=" language-java"><code class="language-java">Optional<span class="token operator">&lt;</span>String<span class="token operator">></span> stringOptional <span class="token operator">=</span> Optional<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">"å¼ ä¸‰"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>stringOptional<span class="token punctuation">.</span><span class="token function">orElse</span><span class="token punctuation">(</span><span class="token string">"zhangsan"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Optional<span class="token operator">&lt;</span>String<span class="token operator">></span> emptyOptional <span class="token operator">=</span> Optional<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>emptyOptional<span class="token punctuation">.</span><span class="token function">orElse</span><span class="token punctuation">(</span><span class="token string">"æå››"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p><img src="/images/java8-lambda-with-date-process/jdk1.8-optional-orElse-example.png" alt="option.orElse()è¿è¡Œç»“æœ"><br>orElseGet<br>å¦‚æœåˆ›å»ºçš„Optionalä¸­æœ‰å€¼å­˜åœ¨ï¼Œåˆ™è¿”å›æ­¤å€¼ï¼Œå¦åˆ™è¿”å›ä¸€ä¸ªç”±Supplieræ¥å£ç”Ÿæˆçš„å€¼</p>
<pre class=" language-java"><code class="language-java">Optional<span class="token operator">&lt;</span>String<span class="token operator">></span> stringOptional <span class="token operator">=</span> Optional<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">"å¼ ä¸‰"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>stringOptional<span class="token punctuation">.</span><span class="token function">orElseGet</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token string">"zhangsan"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Optional<span class="token operator">&lt;</span>String<span class="token operator">></span> emptyOptional <span class="token operator">=</span> Optional<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>emptyOptional<span class="token punctuation">.</span><span class="token function">orElseGet</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token string">"orElseGet"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p><img src="/images/java8-lambda-with-date-process/jdk1.8-optional-orElseGet-example.png" alt="option.orElseGet()è¿è¡Œç»“æœ"><br>orElseThrow<br>å¦‚æœåˆ›å»ºçš„Optionalä¸­æœ‰å€¼å­˜åœ¨ï¼Œåˆ™è¿”å›æ­¤å€¼ï¼Œå¦åˆ™æŠ›å‡ºä¸€ä¸ªç”±æŒ‡å®šçš„Supplieræ¥å£ç”Ÿæˆçš„å¼‚å¸¸</p>
<pre class=" language-java"><code class="language-java">Optional<span class="token operator">&lt;</span>String<span class="token operator">></span> stringOptional <span class="token operator">=</span> Optional<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">"å¼ ä¸‰"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>stringOptional<span class="token punctuation">.</span><span class="token function">orElseThrow</span><span class="token punctuation">(</span>CustomException<span class="token operator">:</span><span class="token operator">:</span><span class="token keyword">new</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Optional<span class="token operator">&lt;</span>String<span class="token operator">></span> emptyOptional <span class="token operator">=</span> Optional<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>emptyOptional<span class="token punctuation">.</span><span class="token function">orElseThrow</span><span class="token punctuation">(</span>CustomException<span class="token operator">:</span><span class="token operator">:</span><span class="token keyword">new</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">CustomException</span> <span class="token keyword">extends</span> <span class="token class-name">RuntimeException</span> <span class="token punctuation">{</span>
   <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">long</span> serialVersionUID <span class="token operator">=</span> <span class="token operator">-</span>4399699891687593264L<span class="token punctuation">;</span>

   <span class="token keyword">public</span> <span class="token function">CustomException</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token string">"è‡ªå®šä¹‰å¼‚å¸¸"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>

   <span class="token keyword">public</span> <span class="token function">CustomException</span><span class="token punctuation">(</span>String message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">super</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
  <span class="token punctuation">}</span></code></pre>
<p><img src="/images/java8-lambda-with-date-process/jdk1.8-optional-orElseThrow-example.png" alt="option.orElseThrow()è¿è¡Œç»“æœ"><br>filter<br>å¦‚æœåˆ›å»ºçš„Optionalä¸­çš„å€¼æ»¡è¶³filterä¸­çš„æ¡ä»¶ï¼Œåˆ™è¿”å›åŒ…å«è¯¥å€¼çš„Optionalå¯¹è±¡ï¼Œå¦åˆ™è¿”å›ä¸€ä¸ªç©ºçš„Optionalå¯¹è±¡</p>
<pre class=" language-java"><code class="language-java">Optional<span class="token operator">&lt;</span>String<span class="token operator">></span> stringOptional <span class="token operator">=</span> Optional<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">"zhangsan"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>stringOptional<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>e <span class="token operator">-</span><span class="token operator">></span> e<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">orElse</span><span class="token punctuation">(</span><span class="token string">"ç‹äº”"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
stringOptional <span class="token operator">=</span> Optional<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>stringOptional<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>e <span class="token operator">-</span><span class="token operator">></span> e<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">orElse</span><span class="token punctuation">(</span><span class="token string">"lisi"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p><img src="/images/java8-lambda-with-date-process/jdk1.8-optional-filter-example.png" alt="option.filter()è¿è¡Œç»“æœ"><br>æ³¨æ„Optionalä¸­çš„filteræ–¹æ³•å’ŒStreamä¸­çš„filteræ–¹æ³•æ˜¯æœ‰ç‚¹ä¸ä¸€æ ·çš„ï¼ŒStreamä¸­çš„filteræ–¹æ³•æ˜¯å¯¹ä¸€å †å…ƒç´ è¿›<br>è¡Œè¿‡æ»¤ï¼Œè€ŒOptionalä¸­çš„filteræ–¹æ³•åªæ˜¯å¯¹ä¸€ä¸ªå…ƒç´ è¿›è¡Œè¿‡æ»¤ï¼Œå¯ä»¥æŠŠOptionalçœ‹æˆæ˜¯æœ€å¤šåªåŒ…å«ä¸€ä¸ªå…ƒç´ çš„Streamã€‚<br>map<br>å¦‚æœåˆ›å»ºçš„Optionalä¸­çš„å€¼å­˜åœ¨ï¼Œå¯¹è¯¥å€¼æ‰§è¡Œæä¾›çš„Functionå‡½æ•°è°ƒç”¨</p>
<pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">//mapæ–¹æ³•æ‰§è¡Œä¼ å…¥çš„lambdaè¡¨è¾¾å¼å‚æ•°å¯¹Optionalå®ä¾‹çš„å€¼è¿›è¡Œä¿®æ”¹,ä¿®æ”¹åçš„è¿”å›å€¼ä»ç„¶æ˜¯ä¸€ä¸ªOptionalå¯¹è±¡</span>
Optional<span class="token operator">&lt;</span>String<span class="token operator">></span> stringOptional <span class="token operator">=</span> Optional<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">"zhangsan"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>stringOptional<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>e <span class="token operator">-</span><span class="token operator">></span> e<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">orElse</span><span class="token punctuation">(</span><span class="token string">"å¤±è´¥"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
stringOptional <span class="token operator">=</span> Optional<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>stringOptional<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>e <span class="token operator">-</span><span class="token operator">></span> e<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">orElse</span><span class="token punctuation">(</span><span class="token string">"å¤±è´¥"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p><img src="/images/java8-lambda-with-date-process/jdk1.8-optional-map-example.png" alt="option.map()è¿è¡Œç»“æœ"><br>flagMap<br>å¦‚æœåˆ›å»ºçš„Optionalä¸­çš„å€¼å­˜åœ¨ï¼Œå°±å¯¹è¯¥å€¼æ‰§è¡Œæä¾›çš„Functionå‡½æ•°è°ƒç”¨ï¼Œè¿”å›ä¸€ä¸ªOptionalç±»å‹çš„å€¼ï¼Œå¦<br>åˆ™å°±è¿”å›ä¸€ä¸ªç©ºçš„Optionalå¯¹è±¡.flatMapä¸mapï¼ˆFuntionï¼‰æ–¹æ³•ç±»ä¼¼ï¼ŒåŒºåˆ«åœ¨äºflatMapä¸­çš„mapperè¿”å›<br>å€¼å¿…é¡»æ˜¯Optionalï¼Œmapæ–¹æ³•çš„mappingå‡½æ•°è¿”å›å€¼å¯ä»¥æ˜¯ä»»ä½•ç±»å‹Tã€‚è°ƒç”¨ç»“æŸæ—¶ï¼ŒflatMapä¸ä¼šå¯¹ç»“æœ<br>ç”¨Optionalå°è£…ã€‚</p>
<pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">//mapæ–¹æ³•ä¸­çš„lambdaè¡¨è¾¾å¼è¿”å›å€¼å¯ä»¥æ˜¯ä»»æ„ç±»å‹ï¼Œåœ¨mapå‡½æ•°è¿”å›ä¹‹å‰ä¼šåŒ…è£…ä¸ºOptionalã€‚ </span>
<span class="token comment" spellcheck="true">//ä½†flatMapæ–¹æ³•ä¸­çš„lambdaè¡¨è¾¾å¼è¿”å›å€¼å¿…é¡»æ˜¯Optionlå®ä¾‹</span>
Optional<span class="token operator">&lt;</span>String<span class="token operator">></span> stringOptional <span class="token operator">=</span> Optional<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">"zhangsan"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>stringOptional<span class="token punctuation">.</span><span class="token function">flatMap</span><span class="token punctuation">(</span>e <span class="token operator">-</span><span class="token operator">></span> Optional<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">"lisi"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">orElse</span><span class="token punctuation">(</span><span class="token string">"å¤±è´¥"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

stringOptional <span class="token operator">=</span> Optional<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>stringOptional<span class="token punctuation">.</span><span class="token function">flatMap</span><span class="token punctuation">(</span>e <span class="token operator">-</span><span class="token operator">></span> Optional<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">orElse</span><span class="token punctuation">(</span><span class="token string">"å¤±è´¥"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p><img src="/images/java8-lambda-with-date-process/jdk1.8-optional-flatMap-example.png" alt="option.flagMap()è¿è¡Œç»“æœ"><br>ifPresent</p>
<pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">//ifPresentæ–¹æ³•çš„å‚æ•°æ˜¯ä¸€ä¸ªConsumerçš„å®ç°ç±»ï¼ŒConsumerç±»åŒ…å«ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œè¯¥æŠ½è±¡æ–¹æ³•å¯¹ä¼ å…¥çš„å€¼è¿›è¡Œå¤„ç†ï¼Œåªå¤„ç†æ²¡æœ‰è¿”å›å€¼ã€‚</span>
Optional<span class="token operator">&lt;</span>String<span class="token operator">></span> stringOptional <span class="token operator">=</span> Optional<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">"zhangsan"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
stringOptional<span class="token punctuation">.</span><span class="token function">ifPresent</span><span class="token punctuation">(</span>e<span class="token operator">-</span><span class="token operator">></span> System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æˆ‘è¢«å¤„ç†äº†ã€‚ã€‚ã€‚"</span><span class="token operator">+</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p><img src="/images/java8-lambda-with-date-process/jdk1.8-optional-ifPresent-example.png" alt="option.ifPresent()è¿è¡Œç»“æœ"></p>
<h2 id="8-java8æ—¥æœŸå’Œæ—¶é—´"><a href="#8-java8æ—¥æœŸå’Œæ—¶é—´" class="headerlink" title="8:java8æ—¥æœŸå’Œæ—¶é—´"></a>8:java8æ—¥æœŸå’Œæ—¶é—´</h2><p>Java 8é€šè¿‡å‘å¸ƒæ–°çš„Date-Time API æ¥è¿›ä¸€æ­¥åŠ å¼ºå¯¹æ—¥æœŸä¸æ—¶é—´çš„å¤„ç†ã€‚<br>åœ¨æ—§ç‰ˆçš„ Java ä¸­ï¼Œæ—¥æœŸæ—¶é—´ API å­˜åœ¨è¯¸å¤šé—®é¢˜ï¼Œå…¶ä¸­æœ‰ï¼š<br>éçº¿ç¨‹å®‰å…¨ âˆ’ java.util.Date æ˜¯éçº¿ç¨‹å®‰å…¨çš„ï¼Œæ‰€æœ‰çš„æ—¥æœŸç±»éƒ½æ˜¯å¯å˜çš„ï¼Œè¿™æ˜¯Javaæ—¥æœŸç±»æœ€å¤§çš„é—®é¢˜ä¹‹ä¸€ã€‚<br>          ç”¨äºæ ¼å¼åŒ–æ—¥æœŸçš„ç±»DateFormatè¢«æ”¾åœ¨java.textåŒ…ä¸­,å®ƒæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å®ä¾‹åŒ–ä¸€ä¸ªSimpleDateFormatå¯¹è±¡æ¥å¤„ç†æ—¥æœŸæ ¼å¼åŒ–ï¼Œå¹¶ä¸”DateFormatä¹Ÿæ˜¯éçº¿ç¨‹å®‰å…¨ï¼Œè¿™æ„å‘³ç€å¦‚æœä½ åœ¨å¤šçº¿ç¨‹ç¨‹åºä¸­è°ƒç”¨åŒä¸€ä¸ªDateFormatå¯¹è±¡,ä¼šå¾—åˆ°æ„æƒ³ä¸åˆ°çš„ç»“æœã€‚<br>è®¾è®¡å¾ˆå·® âˆ’ Javaçš„æ—¥æœŸ/æ—¶é—´ç±»çš„å®šä¹‰å¹¶ä¸ä¸€è‡´ï¼Œåœ¨java.utilå’Œjava.sqlçš„åŒ…ä¸­éƒ½æœ‰æ—¥æœŸç±»ï¼Œæ­¤å¤–ç”¨äºæ ¼å¼åŒ–å’Œè§£æçš„ç±»åœ¨java.textåŒ…ä¸­å®šä¹‰ã€‚java.util.DateåŒæ—¶åŒ…å«æ—¥æœŸå’Œæ—¶é—´ï¼Œè€Œjava.sql.Dateä»…åŒ…å«æ—¥æœŸï¼Œå°†å…¶çº³å…¥java.sqlåŒ…å¹¶ä¸åˆç†ã€‚å¦å¤–è¿™ä¸¤ä¸ªç±»éƒ½æœ‰ç›¸åŒçš„åå­—ï¼Œè¿™æœ¬èº«å°±æ˜¯ä¸€ä¸ªéå¸¸ç³Ÿç³•çš„è®¾è®¡ã€‚<br>æ—¶åŒºå¤„ç†éº»çƒ¦ âˆ’ æ—¥æœŸç±»å¹¶ä¸æä¾›å›½é™…åŒ–ï¼Œæ²¡æœ‰æ—¶åŒºæ”¯æŒï¼Œå› æ­¤Javaå¼•å…¥äº†java.util.Calendarå’Œjava.util.TimeZoneç±»ï¼Œä½†ä»–ä»¬åŒæ ·å­˜åœ¨ä¸Šè¿°æ‰€æœ‰çš„é—®é¢˜ã€‚<br>        å¯¹æ—¥æœŸçš„è®¡ç®—æ–¹å¼ç¹çï¼Œè€Œä¸”å®¹æ˜“å‡ºé”™ï¼Œå› ä¸ºæœˆä»½æ˜¯ä»0å¼€å§‹çš„ï¼Œä»Calendarä¸­è·å–çš„æœˆä»½éœ€è¦åŠ ä¸€æ‰èƒ½è¡¨ç¤ºå½“å‰æœˆä»½.<br>Java 8 åœ¨ java.time åŒ…ä¸‹æä¾›äº†å¾ˆå¤šæ–°çš„ APIã€‚ä»¥ä¸‹ä¸ºä¸¤ä¸ªæ¯”è¾ƒé‡è¦çš„ APIï¼š<br>Local(æœ¬åœ°) âˆ’ ç®€åŒ–äº†æ—¥æœŸæ—¶é—´çš„å¤„ç†ï¼Œæ²¡æœ‰æ—¶åŒºçš„é—®é¢˜ã€‚<br>Zoned(æ—¶åŒº) âˆ’ é€šè¿‡åˆ¶å®šçš„æ—¶åŒºå¤„ç†æ—¥æœŸæ—¶é—´ã€‚<br>æ–°çš„java.timeåŒ…æ¶µç›–äº†æ‰€æœ‰å¤„ç†æ—¥æœŸ,æ—¶é—´,æ—¥æœŸ/æ—¶é—´ï¼Œæ—¶åŒºï¼Œæ—¶åˆ»ï¼ˆinstantsï¼‰ï¼Œè¿‡ç¨‹ï¼ˆduringï¼‰ä¸æ—¶é’Ÿï¼ˆclockï¼‰çš„æ“ä½œã€‚</p>
<p>Java 8æ—¥æœŸ/æ—¶é—´ç±»<br>Java 8çš„æ—¥æœŸå’Œæ—¶é—´ç±»åŒ…å«LocalDateã€LocalTimeã€Instantã€Durationä»¥åŠPeriodï¼Œè¿™äº›ç±»éƒ½åŒ…å«åœ¨java.timeåŒ…ä¸­ï¼Œä¸‹é¢æˆ‘ä»¬çœ‹çœ‹è¿™äº›ç±»çš„ç”¨æ³•ã€‚<br>LocalDateå’ŒLocalTime<br>LocalDateç±»è¡¨ç¤ºä¸€ä¸ªå…·ä½“çš„æ—¥æœŸï¼Œä½†ä¸åŒ…å«å…·ä½“æ—¶é—´ï¼Œä¹Ÿä¸åŒ…å«æ—¶åŒºä¿¡æ¯ã€‚å¯ä»¥é€šè¿‡LocalDateçš„é™æ€æ–¹æ³•of()åˆ›å»ºä¸€ä¸ªå®ä¾‹ï¼ŒLocalDateä¹ŸåŒ…å«ä¸€äº›æ–¹æ³•ç”¨æ¥è·å–å¹´ä»½ï¼Œæœˆä»½ï¼Œå¤©ï¼Œæ˜ŸæœŸå‡ </p>
<pre class=" language-java"><code class="language-java">LocalDate localDate <span class="token operator">=</span> LocalDate<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">2017</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment" spellcheck="true">// åˆå§‹åŒ–ä¸€ä¸ªæ—¥æœŸï¼š2017-01-04</span>
<span class="token keyword">int</span> year <span class="token operator">=</span> localDate<span class="token punctuation">.</span><span class="token function">getYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                     <span class="token comment" spellcheck="true">// å¹´ä»½ï¼š2017</span>
Month month <span class="token operator">=</span> localDate<span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                 <span class="token comment" spellcheck="true">// æœˆä»½ï¼šJANUARY</span>
<span class="token keyword">int</span> dayOfMonth <span class="token operator">=</span> localDate<span class="token punctuation">.</span><span class="token function">getDayOfMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token comment" spellcheck="true">// æœˆä»½ä¸­çš„ç¬¬å‡ å¤©ï¼š4</span>
DayOfWeek dayOfWeek <span class="token operator">=</span> localDate<span class="token punctuation">.</span><span class="token function">getDayOfWeek</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment" spellcheck="true">// ä¸€å‘¨çš„ç¬¬å‡ å¤©ï¼šWEDNESDAY</span>
<span class="token keyword">int</span> length <span class="token operator">=</span> localDate<span class="token punctuation">.</span><span class="token function">lengthOfMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>             <span class="token comment" spellcheck="true">// æœˆä»½çš„å¤©æ•°ï¼š31</span>
<span class="token keyword">boolean</span> leapYear <span class="token operator">=</span> localDate<span class="token punctuation">.</span><span class="token function">isLeapYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment" spellcheck="true">// æ˜¯å¦ä¸ºé—°å¹´ï¼šfalse</span></code></pre>
<p>ä¹Ÿå¯ä»¥è°ƒç”¨é™æ€æ–¹æ³•now()æ¥è·å–å½“å‰æ—¥æœŸï¼š</p>
<pre class=" language-java"><code class="language-java">LocalDate now <span class="token operator">=</span> LocalDate<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>LocalTimeå’ŒLocalDateç±»ä¼¼ï¼Œä»–ä»¬ä¹‹é—´çš„åŒºåˆ«åœ¨äºLocalDateä¸åŒ…å«å…·ä½“æ—¶é—´ï¼Œè€ŒLocalTimeåŒ…å«å…·ä½“æ—¶é—´ï¼Œä¾‹å¦‚ï¼š</p>
<pre class=" language-java"><code class="language-java">LocalTime localTime <span class="token operator">=</span> LocalTime<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">17</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">,</span> <span class="token number">52</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment" spellcheck="true">// åˆå§‹åŒ–ä¸€ä¸ªæ—¶é—´ï¼š17:23:52</span>
<span class="token keyword">int</span> hour <span class="token operator">=</span> localTime<span class="token punctuation">.</span><span class="token function">getHour</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                     <span class="token comment" spellcheck="true">// æ—¶ï¼š17</span>
<span class="token keyword">int</span> minute <span class="token operator">=</span> localTime<span class="token punctuation">.</span><span class="token function">getMinute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                 <span class="token comment" spellcheck="true">// åˆ†ï¼š23</span>
<span class="token keyword">int</span> second <span class="token operator">=</span> localTime<span class="token punctuation">.</span><span class="token function">getSecond</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                 <span class="token comment" spellcheck="true">// ç§’ï¼š52</span></code></pre>
<p>LocalDateTime<br>LocalDateTimeç±»æ˜¯LocalDateå’ŒLocalTimeçš„ç»“åˆä½“ï¼Œå¯ä»¥é€šè¿‡of()æ–¹æ³•ç›´æ¥åˆ›å»ºï¼Œä¹Ÿå¯ä»¥è°ƒç”¨LocalDateçš„atTime()æ–¹æ³•æˆ–LocalTimeçš„atDate()æ–¹æ³•å°†LocalDateæˆ–LocalTimeåˆå¹¶æˆä¸€ä¸ªLocalDateTimeï¼š</p>
<pre class=" language-java"><code class="language-java">LocalDateTime ldt1 <span class="token operator">=</span> LocalDateTime<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">2017</span><span class="token punctuation">,</span> Month<span class="token punctuation">.</span>JANUARY<span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">17</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">,</span> <span class="token number">52</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
LocalDate localDate <span class="token operator">=</span> LocalDate<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">2017</span><span class="token punctuation">,</span> Month<span class="token punctuation">.</span>JANUARY<span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
LocalTime localTime <span class="token operator">=</span> LocalTime<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">17</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">,</span> <span class="token number">52</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
LocalDateTime ldt2 <span class="token operator">=</span> localDate<span class="token punctuation">.</span><span class="token function">atTime</span><span class="token punctuation">(</span>localTime<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>LocalDateTimeä¹Ÿæä¾›ç”¨äºå‘LocalDateå’ŒLocalTimeçš„è½¬åŒ–ï¼š</p>
<pre class=" language-java"><code class="language-java">LocalDate date <span class="token operator">=</span> ldt1<span class="token punctuation">.</span><span class="token function">toLocalDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
LocalTime time <span class="token operator">=</span> ldt1<span class="token punctuation">.</span><span class="token function">toLocalTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>Instant<br>Instantç”¨äºè¡¨ç¤ºä¸€ä¸ªæ—¶é—´æˆ³ï¼Œå®ƒä¸æˆ‘ä»¬å¸¸ä½¿ç”¨çš„System.currentTimeMillis()æœ‰äº›ç±»ä¼¼ï¼Œä¸è¿‡Instantå¯ä»¥ç²¾ç¡®åˆ°çº³ç§’ï¼ˆNano-Secondï¼‰ï¼ŒSystem.currentTimeMillis()æ–¹æ³•åªç²¾ç¡®åˆ°æ¯«ç§’ï¼ˆMilli-Secondï¼‰ã€‚å¦‚æœæŸ¥çœ‹Instantæºç ï¼Œå‘ç°å®ƒçš„å†…éƒ¨ä½¿ç”¨äº†ä¸¤ä¸ªå¸¸é‡ï¼Œsecondsè¡¨ç¤ºä»1970-01-01 00:00:00å¼€å§‹åˆ°ç°åœ¨çš„ç§’æ•°ï¼Œnanosè¡¨ç¤ºçº³ç§’éƒ¨åˆ†ï¼ˆnanosçš„å€¼ä¸ä¼šè¶…è¿‡999,999,999ï¼‰ã€‚Instanté™¤äº†ä½¿ç”¨now()æ–¹æ³•åˆ›å»ºå¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡ofEpochSecondæ–¹æ³•åˆ›å»ºï¼š</p>
<pre class=" language-java"><code class="language-java">Instant instant <span class="token operator">=</span> Instant<span class="token punctuation">.</span><span class="token function">ofEpochSecond</span><span class="token punctuation">(</span><span class="token number">120</span><span class="token punctuation">,</span> <span class="token number">100000</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>ofEpochSecond()æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºç§’ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºçº³ç§’ï¼Œä¸Šé¢çš„ä»£ç è¡¨ç¤ºä»1970-01-01 00:00:00å¼€å§‹åä¸¤åˆ†é’Ÿçš„10ä¸‡çº³ç§’çš„æ—¶åˆ»ï¼Œæ§åˆ¶å°ä¸Šçš„è¾“å‡ºä¸ºï¼š</p>
<pre class=" language-java"><code class="language-java"><span class="token number">1970</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span>01T00<span class="token operator">:</span><span class="token number">02</span><span class="token operator">:</span><span class="token number">00</span><span class="token punctuation">.</span>000100Z</code></pre>
<p>Duration<br>Durationçš„å†…éƒ¨å®ç°ä¸Instantç±»ä¼¼ï¼Œä¹Ÿæ˜¯åŒ…å«ä¸¤éƒ¨åˆ†ï¼šsecondsè¡¨ç¤ºç§’ï¼Œnanosè¡¨ç¤ºçº³ç§’ã€‚ä¸¤è€…çš„åŒºåˆ«æ˜¯Instantç”¨äºè¡¨ç¤ºä¸€ä¸ªæ—¶é—´æˆ³ï¼ˆæˆ–è€…è¯´æ˜¯ä¸€ä¸ªæ—¶é—´ç‚¹ï¼‰ï¼Œè€ŒDurationè¡¨ç¤ºä¸€ä¸ªæ—¶é—´æ®µï¼Œæ‰€ä»¥Durationç±»ä¸­ä¸åŒ…å«now()é™æ€æ–¹æ³•ã€‚å¯ä»¥é€šè¿‡Duration.between()æ–¹æ³•åˆ›å»ºDurationå¯¹è±¡ï¼š</p>
<pre class=" language-java"><code class="language-java">LocalDateTime from <span class="token operator">=</span> LocalDateTime<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">2017</span><span class="token punctuation">,</span> Month<span class="token punctuation">.</span>JANUARY<span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// 2017-01-05 10:07:00</span>
LocalDateTime to <span class="token operator">=</span> LocalDateTime<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">2017</span><span class="token punctuation">,</span> Month<span class="token punctuation">.</span>FEBRUARY<span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment" spellcheck="true">// 2017-02-05 10:07:00</span>
Duration duration <span class="token operator">=</span> Duration<span class="token punctuation">.</span><span class="token function">between</span><span class="token punctuation">(</span>from<span class="token punctuation">,</span> to<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment" spellcheck="true">// è¡¨ç¤ºä» 2017-01-05 10:07:00 åˆ° 2017-02-05 10:07:00 è¿™æ®µæ—¶é—´</span>

<span class="token keyword">long</span> days <span class="token operator">=</span> duration<span class="token punctuation">.</span><span class="token function">toDays</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token comment" spellcheck="true">// è¿™æ®µæ—¶é—´çš„æ€»å¤©æ•°</span>
<span class="token keyword">long</span> hours <span class="token operator">=</span> duration<span class="token punctuation">.</span><span class="token function">toHours</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// è¿™æ®µæ—¶é—´çš„å°æ—¶æ•°</span>
<span class="token keyword">long</span> minutes <span class="token operator">=</span> duration<span class="token punctuation">.</span><span class="token function">toMinutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// è¿™æ®µæ—¶é—´çš„åˆ†é’Ÿæ•°</span>
<span class="token keyword">long</span> seconds <span class="token operator">=</span> duration<span class="token punctuation">.</span><span class="token function">getSeconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment" spellcheck="true">// è¿™æ®µæ—¶é—´çš„ç§’æ•°</span>
<span class="token keyword">long</span> milliSeconds <span class="token operator">=</span> duration<span class="token punctuation">.</span><span class="token function">toMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// è¿™æ®µæ—¶é—´çš„æ¯«ç§’æ•°</span>
<span class="token keyword">long</span> nanoSeconds <span class="token operator">=</span> duration<span class="token punctuation">.</span><span class="token function">toNanos</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">// è¿™æ®µæ—¶é—´çš„çº³ç§’æ•°</span></code></pre>
<p>Durationå¯¹è±¡è¿˜å¯ä»¥é€šè¿‡of()æ–¹æ³•åˆ›å»ºï¼Œè¯¥æ–¹æ³•æ¥å—ä¸€ä¸ªæ—¶é—´æ®µé•¿åº¦ï¼Œå’Œä¸€ä¸ªæ—¶é—´å•ä½ä½œä¸ºå‚æ•°ï¼š</p>
<pre class=" language-java"><code class="language-java">Duration duration1 <span class="token operator">=</span> Duration<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> ChronoUnit<span class="token punctuation">.</span>DAYS<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment" spellcheck="true">// 5å¤©</span>
Duration duration2 <span class="token operator">=</span> Duration<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">,</span> ChronoUnit<span class="token punctuation">.</span>MILLIS<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">// 1000æ¯«ç§’</span></code></pre>
<p>Period<br>Periodåœ¨æ¦‚å¿µä¸Šå’ŒDurationç±»ä¼¼ï¼ŒåŒºåˆ«åœ¨äºPeriodæ˜¯ä»¥å¹´æœˆæ—¥æ¥è¡¡é‡ä¸€ä¸ªæ—¶é—´æ®µï¼Œæ¯”å¦‚2å¹´3ä¸ªæœˆ6å¤©ï¼š</p>
<pre class=" language-java"><code class="language-java">Period period <span class="token operator">=</span> Period<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>Periodå¯¹è±¡ä¹Ÿå¯ä»¥é€šè¿‡between()æ–¹æ³•åˆ›å»ºï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œç”±äºPeriodæ˜¯ä»¥å¹´æœˆæ—¥è¡¡é‡æ—¶é—´æ®µï¼Œæ‰€ä»¥between()æ–¹æ³•åªèƒ½æ¥æ”¶LocalDateç±»å‹çš„å‚æ•°ï¼š</p>
<pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// 2017-01-05 åˆ° 2017-02-05 è¿™æ®µæ—¶é—´</span>
Period period <span class="token operator">=</span> Period<span class="token punctuation">.</span><span class="token function">between</span><span class="token punctuation">(</span>
                LocalDate<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">2017</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                LocalDate<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">2017</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>æ—¥æœŸçš„æ“ä½œå’Œæ ¼å¼åŒ–<br>å¢åŠ å’Œå‡å°‘æ—¥æœŸ<br>Java 8ä¸­çš„æ—¥æœŸ/æ—¶é—´ç±»éƒ½æ˜¯ä¸å¯å˜çš„ï¼Œè¿™æ˜¯ä¸ºäº†ä¿è¯çº¿ç¨‹å®‰å…¨ã€‚å½“ç„¶ï¼Œæ–°çš„æ—¥æœŸ/æ—¶é—´ç±»ä¹Ÿæä¾›äº†æ–¹æ³•ç”¨äºåˆ›å»ºå¯¹è±¡çš„å¯å˜ç‰ˆæœ¬ï¼Œæ¯”å¦‚å¢åŠ ä¸€å¤©æˆ–è€…å‡å°‘ä¸€å¤©ï¼š</p>
<pre class=" language-java"><code class="language-java">LocalDate date <span class="token operator">=</span> LocalDate<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">2017</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment" spellcheck="true">// 2017-01-05</span>

LocalDate date1 <span class="token operator">=</span> date<span class="token punctuation">.</span><span class="token function">withYear</span><span class="token punctuation">(</span><span class="token number">2016</span><span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token comment" spellcheck="true">// ä¿®æ”¹ä¸º 2016-01-05</span>
LocalDate date2 <span class="token operator">=</span> date<span class="token punctuation">.</span><span class="token function">withMonth</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment" spellcheck="true">// ä¿®æ”¹ä¸º 2017-02-05</span>
LocalDate date3 <span class="token operator">=</span> date<span class="token punctuation">.</span><span class="token function">withDayOfMonth</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token comment" spellcheck="true">// ä¿®æ”¹ä¸º 2017-01-01</span>

LocalDate date4 <span class="token operator">=</span> date<span class="token punctuation">.</span><span class="token function">plusYears</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment" spellcheck="true">// å¢åŠ ä¸€å¹´ 2018-01-05</span>
LocalDate date5 <span class="token operator">=</span> date<span class="token punctuation">.</span><span class="token function">minusMonths</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token comment" spellcheck="true">// å‡å°‘ä¸¤ä¸ªæœˆ 2016-11-05</span>
LocalDate date6 <span class="token operator">=</span> date<span class="token punctuation">.</span><span class="token function">plus</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> ChronoUnit<span class="token punctuation">.</span>DAYS<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// å¢åŠ 5å¤© 2017-01-10</span></code></pre>
<p>ä¸Šé¢ä¾‹å­ä¸­å¯¹äºæ—¥æœŸçš„æ“ä½œæ¯”è¾ƒç®€å•ï¼Œä½†æ˜¯æœ‰äº›æ—¶å€™æˆ‘ä»¬è¦é¢ä¸´æ›´å¤æ‚çš„æ—¶é—´æ“ä½œï¼Œæ¯”å¦‚å°†æ—¶é—´è°ƒåˆ°ä¸‹ä¸€ä¸ªå·¥ä½œæ—¥ï¼Œæˆ–è€…æ˜¯ä¸‹ä¸ªæœˆçš„æœ€åä¸€å¤©ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥ä½¿ç”¨with()æ–¹æ³•çš„å¦ä¸€ä¸ªé‡è½½æ–¹æ³•ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªTemporalAdjusterå‚æ•°ï¼Œå¯ä»¥ä½¿æˆ‘ä»¬æ›´åŠ çµæ´»çš„è°ƒæ•´æ—¥æœŸï¼š</p>
<pre class=" language-java"><code class="language-java">LocalDate date7 <span class="token operator">=</span> date<span class="token punctuation">.</span><span class="token function">with</span><span class="token punctuation">(</span><span class="token function">nextOrSame</span><span class="token punctuation">(</span>DayOfWeek<span class="token punctuation">.</span>SUNDAY<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">// è¿”å›ä¸‹ä¸€ä¸ªè·ç¦»å½“å‰æ—¶é—´æœ€è¿‘çš„æ˜ŸæœŸæ—¥</span>
LocalDate date9 <span class="token operator">=</span> date<span class="token punctuation">.</span><span class="token function">with</span><span class="token punctuation">(</span><span class="token function">lastInMonth</span><span class="token punctuation">(</span>DayOfWeek<span class="token punctuation">.</span>SATURDAY<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment" spellcheck="true">// è¿”å›æœ¬æœˆæœ€åä¸€ä¸ªæ˜ŸæœŸå…­</span></code></pre>
<p>è¦ä½¿ä¸Šé¢çš„ä»£ç æ­£ç¡®ç¼–è¯‘ï¼Œä½ éœ€è¦ä½¿ç”¨é™æ€å¯¼å…¥TemporalAdjusterså¯¹è±¡ï¼š</p>
<pre class=" language-java"><code class="language-java"><span class="token keyword">import</span> <span class="token keyword">static</span> java<span class="token punctuation">.</span>time<span class="token punctuation">.</span>temporal<span class="token punctuation">.</span>TemporalAdjusters<span class="token punctuation">.</span>*<span class="token punctuation">;</span></code></pre>
<p>TemporalAdjustersç±»ä¸­åŒ…å«äº†å¾ˆå¤šé™æ€æ–¹æ³•å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œä¸‹é¢çš„è¡¨æ ¼åˆ—å‡ºäº†ä¸€äº›æ–¹æ³•ï¼š<br><img src="/images/java8-lambda-with-date-process/jdk1.8-TemporalAdjusters-method-example.png" alt="TemporalAdjustersç›¸å…³é™æ€æ–¹æ³•.png"><br>å¦‚æœä¸Šé¢è¡¨æ ¼ä¸­åˆ—å‡ºçš„æ–¹æ³•ä¸èƒ½æ»¡è¶³ä½ çš„éœ€æ±‚ï¼Œä½ è¿˜å¯ä»¥åˆ›å»ºè‡ªå®šä¹‰çš„TemporalAdjusteræ¥å£çš„å®ç°ï¼ŒTemporalAdjusterä¹Ÿæ˜¯ä¸€ä¸ªå‡½æ•°å¼æ¥å£ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Lambdaè¡¨è¾¾å¼ï¼š</p>
<pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@FunctionalInterface</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">TemporalAdjuster</span> <span class="token punctuation">{</span>
    Temporal <span class="token function">adjustInto</span><span class="token punctuation">(</span>Temporal temporal<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>æ¯”å¦‚ç»™å®šä¸€ä¸ªæ—¥æœŸï¼Œè®¡ç®—è¯¥æ—¥æœŸçš„ä¸‹ä¸€ä¸ªå·¥ä½œæ—¥ï¼ˆä¸åŒ…æ‹¬æ˜ŸæœŸå…­å’Œæ˜ŸæœŸå¤©ï¼‰ï¼š</p>
<pre class=" language-java"><code class="language-java">LocalDate date <span class="token operator">=</span> LocalDate<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">2017</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
date<span class="token punctuation">.</span><span class="token function">with</span><span class="token punctuation">(</span>temporal <span class="token operator">-</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">// å½“å‰æ—¥æœŸ</span>
    DayOfWeek dayOfWeek <span class="token operator">=</span> DayOfWeek<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>temporal<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>ChronoField<span class="token punctuation">.</span>DAY_OF_WEEK<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">// æ­£å¸¸æƒ…å†µä¸‹ï¼Œæ¯æ¬¡å¢åŠ ä¸€å¤©</span>
    <span class="token keyword">int</span> dayToAdd <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">// å¦‚æœæ˜¯æ˜ŸæœŸäº”ï¼Œå¢åŠ ä¸‰å¤©</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>dayOfWeek <span class="token operator">==</span> DayOfWeek<span class="token punctuation">.</span>FRIDAY<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        dayToAdd <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment" spellcheck="true">// å¦‚æœæ˜¯æ˜ŸæœŸå…­ï¼Œå¢åŠ ä¸¤å¤©</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>dayOfWeek <span class="token operator">==</span> DayOfWeek<span class="token punctuation">.</span>SATURDAY<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        dayToAdd <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> temporal<span class="token punctuation">.</span><span class="token function">plus</span><span class="token punctuation">(</span>dayToAdd<span class="token punctuation">,</span> ChronoUnit<span class="token punctuation">.</span>DAYS<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>æ ¼å¼åŒ–æ—¥æœŸ<br>æ–°çš„æ—¥æœŸAPIä¸­æä¾›äº†ä¸€ä¸ªDateTimeFormatterç±»ç”¨äºå¤„ç†æ—¥æœŸæ ¼å¼åŒ–æ“ä½œï¼Œå®ƒè¢«åŒ…å«åœ¨java.time.formatåŒ…ä¸­ï¼ŒJava 8çš„æ—¥æœŸç±»æœ‰ä¸€ä¸ªformat()æ–¹æ³•ç”¨äºå°†æ—¥æœŸæ ¼å¼åŒ–ä¸ºå­—ç¬¦ä¸²ï¼Œè¯¥æ–¹æ³•æ¥æ”¶ä¸€ä¸ªDateTimeFormatterç±»å‹å‚æ•°ï¼š</p>
<pre class=" language-java"><code class="language-java">LocalDateTime dateTime <span class="token operator">=</span> LocalDateTime<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
String strDate1 <span class="token operator">=</span> dateTime<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>DateTimeFormatter<span class="token punctuation">.</span>BASIC_ISO_DATE<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// 20170105</span>
String strDate2 <span class="token operator">=</span> dateTime<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>DateTimeFormatter<span class="token punctuation">.</span>ISO_LOCAL_DATE<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// 2017-01-05</span>
String strDate3 <span class="token operator">=</span> dateTime<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>DateTimeFormatter<span class="token punctuation">.</span>ISO_LOCAL_TIME<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// 14:20:16.998</span>
String strDate4 <span class="token operator">=</span> dateTime<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>DateTimeFormatter<span class="token punctuation">.</span><span class="token function">ofPattern</span><span class="token punctuation">(</span><span class="token string">"yyyy-MM-dd"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment" spellcheck="true">// 2017-01-05</span>
String strDate5 <span class="token operator">=</span> dateTime<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>DateTimeFormatter<span class="token punctuation">.</span><span class="token function">ofPattern</span><span class="token punctuation">(</span><span class="token string">"ä»Šå¤©æ˜¯ï¼šYYYYå¹´ MMMM DDæ—¥ E"</span><span class="token punctuation">,</span> Locale<span class="token punctuation">.</span>CHINESE<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// ä»Šå¤©æ˜¯ï¼š2017å¹´ ä¸€æœˆ 05æ—¥ æ˜ŸæœŸå››</span></code></pre>
<p>åŒæ ·ï¼Œæ—¥æœŸç±»ä¹Ÿæ”¯æŒå°†ä¸€ä¸ªå­—ç¬¦ä¸²è§£ææˆä¸€ä¸ªæ—¥æœŸå¯¹è±¡ï¼Œä¾‹å¦‚ï¼š</p>
<pre class=" language-java"><code class="language-java">String strDate6 <span class="token operator">=</span> <span class="token string">"2017-01-05"</span><span class="token punctuation">;</span>
String strDate7 <span class="token operator">=</span> <span class="token string">"2017-01-05 12:30:05"</span><span class="token punctuation">;</span>
LocalDate date <span class="token operator">=</span> LocalDate<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>strDate6<span class="token punctuation">,</span> DateTimeFormatter<span class="token punctuation">.</span><span class="token function">ofPattern</span><span class="token punctuation">(</span><span class="token string">"yyyy-MM-dd"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
LocalDateTime dateTime1 <span class="token operator">=</span> LocalDateTime<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>strDate7<span class="token punctuation">,</span> DateTimeFormatter<span class="token punctuation">.</span><span class="token function">ofPattern</span><span class="token punctuation">(</span><span class="token string">"yyyy-MM-dd HH:mm:ss"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>æ—¶åŒº<br>Java 8ä¸­çš„æ—¶åŒºæ“ä½œè¢«å¾ˆå¤§ç¨‹åº¦ä¸Šç®€åŒ–äº†ï¼Œæ–°çš„æ—¶åŒºç±»java.time.ZoneIdæ˜¯åŸæœ‰çš„java.util.TimeZoneç±»çš„æ›¿ä»£å“ã€‚ZoneIdå¯¹è±¡å¯ä»¥é€šè¿‡ZoneId.of()æ–¹æ³•åˆ›å»ºï¼Œä¹Ÿå¯ä»¥é€šè¿‡ZoneId.systemDefault()è·å–ç³»ç»Ÿé»˜è®¤æ—¶åŒºï¼š</p>
<pre class=" language-java"><code class="language-java">ZoneId shanghaiZoneId <span class="token operator">=</span> ZoneId<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">"Asia/Shanghai"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ZoneId systemZoneId <span class="token operator">=</span> ZoneId<span class="token punctuation">.</span><span class="token function">systemDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>of()æ–¹æ³•æ¥æ”¶ä¸€ä¸ªâ€œåŒºåŸŸ/åŸå¸‚â€çš„å­—ç¬¦ä¸²ä½œä¸ºå‚æ•°ï¼Œä½ å¯ä»¥é€šè¿‡getAvailableZoneIds()æ–¹æ³•è·å–æ‰€æœ‰åˆæ³•çš„â€œåŒºåŸŸ/åŸå¸‚â€å­—ç¬¦ä¸²ï¼š</p>
<pre class=" language-java"><code class="language-java">Set<span class="token operator">&lt;</span>String<span class="token operator">></span> zoneIds <span class="token operator">=</span> ZoneId<span class="token punctuation">.</span><span class="token function">getAvailableZoneIds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>å¯¹äºè€çš„æ—¶åŒºç±»TimeZoneï¼ŒJava 8ä¹Ÿæä¾›äº†è½¬åŒ–æ–¹æ³•ï¼š</p>
<pre class=" language-java"><code class="language-java">ZoneId oldToNewZoneId <span class="token operator">=</span> TimeZone<span class="token punctuation">.</span><span class="token function">getDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toZoneId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>æœ‰äº†ZoneIdï¼Œæˆ‘ä»¬å°±å¯ä»¥å°†ä¸€ä¸ªLocalDateã€LocalTimeæˆ–LocalDateTimeå¯¹è±¡è½¬åŒ–ä¸ºZonedDateTimeå¯¹è±¡ï¼š</p>
<pre class=" language-java"><code class="language-java">LocalDateTime localDateTime <span class="token operator">=</span> LocalDateTime<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ZonedDateTime zonedDateTime <span class="token operator">=</span> ZonedDateTime<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>localDateTime<span class="token punctuation">,</span> shanghaiZoneId<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>å°†zonedDateTimeæ‰“å°åˆ°æ§åˆ¶å°ä¸ºï¼š</p>
<pre class=" language-java"><code class="language-java"><span class="token number">2019</span><span class="token operator">-</span><span class="token number">12</span><span class="token operator">-</span>26T16<span class="token operator">:</span><span class="token number">36</span><span class="token operator">:</span><span class="token number">41.971</span><span class="token operator">+</span><span class="token number">08</span><span class="token operator">:</span><span class="token number">00</span><span class="token punctuation">[</span>Asia<span class="token operator">/</span>Shanghai<span class="token punctuation">]</span></code></pre>
<p>ZonedDateTimeå¯¹è±¡ç”±ä¸¤éƒ¨åˆ†æ„æˆï¼ŒLocalDateTimeå’ŒZoneIdï¼Œå…¶ä¸­2017-01-05T15:26:56.147éƒ¨åˆ†ä¸ºLocalDateTimeï¼Œ+08:00[Asia/Shanghai]éƒ¨åˆ†ä¸ºZoneIdã€‚<br>å¦ä¸€ç§è¡¨ç¤ºæ—¶åŒºçš„æ–¹å¼æ˜¯ä½¿ç”¨ZoneOffsetï¼Œå®ƒæ˜¯ä»¥å½“å‰æ—¶é—´å’Œä¸–ç•Œæ ‡å‡†æ—¶é—´ï¼ˆUTCï¼‰/æ ¼æ—å¨æ²»æ—¶é—´ï¼ˆGMTï¼‰çš„åå·®æ¥è®¡ç®—ï¼Œä¾‹å¦‚ï¼š</p>
<pre class=" language-java"><code class="language-java">ZoneOffset zoneOffset <span class="token operator">=</span> ZoneOffset<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">"+09:00"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
LocalDateTime localDateTime <span class="token operator">=</span> LocalDateTime<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
OffsetDateTime offsetDateTime <span class="token operator">=</span> OffsetDateTime<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>localDateTime<span class="token punctuation">,</span> zoneOffset<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>å…¶ä»–å†æ³•<br>Javaä¸­ä½¿ç”¨çš„å†æ³•æ˜¯ISO 8601æ—¥å†ç³»ç»Ÿï¼Œå®ƒæ˜¯ä¸–ç•Œæ°‘ç”¨å†æ³•ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„å…¬å†ã€‚å¹³å¹´æœ‰365å¤©ï¼Œé—°å¹´æ˜¯366å¤©ã€‚é—°å¹´çš„å®šä¹‰æ˜¯ï¼šéä¸–çºªå¹´ï¼Œèƒ½è¢«4æ•´é™¤ï¼›ä¸–çºªå¹´èƒ½è¢«400æ•´é™¤ã€‚ä¸ºäº†è®¡ç®—çš„ä¸€è‡´æ€§ï¼Œå…¬å…ƒ1å¹´çš„å‰ä¸€å¹´è¢«å½“åšå…¬å…ƒ0å¹´ï¼Œä»¥æ­¤ç±»æ¨ã€‚<br>æ­¤å¤–Java 8è¿˜æä¾›äº†4å¥—å…¶ä»–å†æ³•ï¼ˆå¾ˆå¥‡æ€ªä¸ºä»€ä¹ˆæ²¡æœ‰æ±‰æ—äººä½¿ç”¨çš„å†œå†ï¼‰ï¼Œæ¯å¥—å†æ³•éƒ½åŒ…å«ä¸€ä¸ªæ—¥æœŸç±»ï¼Œåˆ†åˆ«æ˜¯ï¼š<br>ThaiBuddhistDateï¼šæ³°å›½ä½›æ•™å†<br>MinguoDateï¼šä¸­åæ°‘å›½å†<br>JapaneseDateï¼šæ—¥æœ¬å†<br>HijrahDateï¼šä¼Šæ–¯å…°å†<br>æ¯ä¸ªæ—¥æœŸç±»éƒ½ç»§æ‰¿ChronoLocalDateç±»ï¼Œæ‰€ä»¥å¯ä»¥åœ¨ä¸çŸ¥é“å…·ä½“å†æ³•çš„æƒ…å†µä¸‹ä¹Ÿå¯ä»¥æ“ä½œã€‚ä¸è¿‡è¿™äº›å†æ³•ä¸€èˆ¬ä¸å¸¸ç”¨ï¼Œé™¤éæ˜¯æœ‰æŸäº›ç‰¹æ®Šéœ€æ±‚æƒ…å†µä¸‹æ‰ä¼šä½¿ç”¨ã€‚<br>è¿™äº›ä¸åŒçš„å†æ³•ä¹Ÿå¯ä»¥ç”¨äºå‘å…¬å†è½¬æ¢ï¼š</p>
<pre class=" language-java"><code class="language-java">LocalDate date <span class="token operator">=</span> LocalDate<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
JapaneseDate jpDate <span class="token operator">=</span> JapaneseDate<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>ç”±äºå®ƒä»¬éƒ½ç»§æ‰¿ChronoLocalDateç±»ï¼Œæ‰€ä»¥åœ¨ä¸çŸ¥é“å…·ä½“å†æ³•æƒ…å†µä¸‹ï¼Œå¯ä»¥é€šè¿‡ChronoLocalDateç±»æ“ä½œæ—¥æœŸï¼š</p>
<pre class=" language-java"><code class="language-java">Chronology jpChronology <span class="token operator">=</span> Chronology<span class="token punctuation">.</span><span class="token function">ofLocale</span><span class="token punctuation">(</span>Locale<span class="token punctuation">.</span>JAPANESE<span class="token punctuation">)</span><span class="token punctuation">;</span>
ChronoLocalDate jpChronoLocalDate <span class="token operator">=</span> jpChronology<span class="token punctuation">.</span><span class="token function">dateNow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>æˆ‘ä»¬åœ¨å¼€å‘è¿‡ç¨‹ä¸­åº”è¯¥å°½é‡é¿å…ä½¿ç”¨ChronoLocalDateï¼Œå°½é‡ç”¨ä¸å†æ³•æ— å…³çš„æ–¹å¼æ“ä½œæ—¶é—´ï¼Œå› ä¸ºä¸åŒçš„å†æ³•è®¡ç®—æ—¥æœŸçš„æ–¹å¼ä¸ä¸€æ ·ï¼Œæ¯”å¦‚å¼€å‘è€…ä¼šåœ¨ç¨‹åºä¸­åšä¸€äº›å‡è®¾ï¼Œå‡è®¾ä¸€å¹´ä¸­æœ‰12ä¸ªæœˆï¼Œå¦‚æœæ˜¯ä¸­å›½å†œå†ä¸­åŒ…å«äº†é—°æœˆï¼Œä¸€å¹´æœ‰å¯èƒ½æ˜¯13ä¸ªæœˆï¼Œä½†å¼€å‘è€…è®¤ä¸ºæ˜¯12ä¸ªæœˆï¼Œå¤šå‡ºæ¥çš„ä¸€ä¸ªæœˆå±äºæ˜å¹´çš„ã€‚å†æ¯”å¦‚å‡è®¾å¹´ä»½æ˜¯ç´¯åŠ çš„ï¼Œè¿‡äº†ä¸€å¹´å°±åœ¨åŸæ¥çš„å¹´ä»½ä¸ŠåŠ ä¸€ï¼Œä½†æ—¥æœ¬å¤©çš‡åœ¨æ¢ä»£ä¹‹åéœ€è¦é‡æ–°çºªå¹´ï¼Œæ‰€ä»¥è¿‡äº†ä¸€å¹´å¹´ä»½å¯èƒ½ä¼šä»1å¼€å§‹è®¡ç®—ã€‚<br>åœ¨å®é™…å¼€å‘è¿‡ç¨‹ä¸­å»ºè®®ä½¿ç”¨LocalDateï¼ŒåŒ…æ‹¬å­˜å‚¨ã€æ“ä½œã€ä¸šåŠ¡è§„åˆ™çš„è§£è¯»ï¼›é™¤ééœ€è¦å°†ç¨‹åºçš„è¾“å…¥æˆ–è€…è¾“å‡ºæœ¬åœ°åŒ–ï¼Œè¿™æ—¶å¯ä»¥ä½¿ç”¨ChronoLocalDateç±»ã€‚</p>
<p>æœ€åæ¨èä¸€ç¯‡éå¸¸ä¸é”™åˆ‡å®ç”¨æ€§å¾ˆå¥½çš„æ·±åº¦ç†è§£lambdaè¡¨è¾¾å¼åšå®¢,è¿™ä¸ªåšå®¢æ€»ç»“äº†å¥½å‡ ç¯‡ä¸é”™çš„labdaè¡¨è¾¾å¼ä¸Streamæµçš„å·¥ä½œä¸­å¸¸ç”¨åˆ°çš„æ¡ˆä¾‹èƒ½å¤Ÿæ›´å¥½çš„å¸®åŠ©åˆ°å¤§å®¶å»ç†è§£å’Œä½¿ç”¨lambdaè¡¨è¾¾å¼è¿™ä¸ªåˆ©å™¨å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿçš„åœ¨å·¥ä½œä¸­è¿›è¡Œè¿­ä»£å¼€å‘,é«˜æ•ˆæ’¸ç ~<a target="_blank" rel="noopener" href="https://www.cnblogs.com/CarpenterLee/category/965121.html">æ·±å…¥ç†è§£Javaå‡½æ•°å¼ç¼–ç¨‹</a></p>

            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        æ–‡ç« ä½œè€…:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="http://xiaomozhang.github.io" rel="external nofollow noreferrer">å°å¼ å“¥</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        æ–‡ç« é“¾æ¥:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="http://xiaomozhang.github.io/2021/10/10/java8-lambda-with-date-process/">http://xiaomozhang.github.io/2021/10/10/java8-lambda-with-date-process/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        ç‰ˆæƒå£°æ˜:
                    </i>
                </span>
                <span class="reprint-info">
                    æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ¥å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥æº
                    <a href="http://xiaomozhang.github.io" target="_blank">å°å¼ å“¥</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>å¤åˆ¶æˆåŠŸï¼Œè¯·éµå¾ªæœ¬æ–‡çš„è½¬è½½è§„åˆ™</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">æŸ¥çœ‹</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/Java8-lambda/">
                                    <span class="chip bg-color">Java8 lambda</span>
                                </a>
                            
                                <a href="/tags/Stream-Programming/">
                                    <span class="chip bg-color">Stream Programming</span>
                                </a>
                            
                                <a href="/tags/LocalDate%E3%80%81LocalTime%E3%80%81Instant%E3%80%81Duration/">
                                    <span class="chip bg-color">LocalDateã€LocalTimeã€Instantã€Duration</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">

<div id="article-share">
    
    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>å¾®ä¿¡æ‰«ä¸€æ‰«å³å¯åˆ†äº«ï¼</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.4rem;
        line-height: 38px;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">èµ</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">ä½ çš„èµè¯†æ˜¯æˆ‘å‰è¿›çš„åŠ¨åŠ›</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">æ”¯ä»˜å®</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">å¾® ä¿¡</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/images/pay/alipay.jpg" class="reward-img" alt="æ”¯ä»˜å®æ‰“èµäºŒç»´ç ">
                    </div>
                    <div id="wechat">
                        <img src="/images/pay/wechat.jpg" class="reward-img" alt="å¾®ä¿¡æ‰“èµäºŒç»´ç ">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>
            
        </div>
    </div>

    
        <link rel="stylesheet" href="/libs/gitalk/gitalk.css">
<link rel="stylesheet" href="/css/my-gitalk.css">

<div class="card gitalk-card" data-aos="fade-up">
    <div class="comment_headling" style="font-size: 20px; font-weight: 700; position: relative; left: 20px; top: 15px; padding-bottom: 5px;">
        <i class="fas fa-comments fa-fw" aria-hidden="true"></i>
        <span>è¯„è®º</span>
    </div>
    <div id="gitalk-container" class="card-content"></div>
</div>

<script src="/libs/gitalk/gitalk.min.js"></script>
<script>
    let gitalk = new Gitalk({
        clientID: '030d444ad9269f7d8b2a',
        clientSecret: 'cf8eee8d0229cdefa0943263806746a2ea317004',
        repo: 'xiaomozhang.github.io',
        owner: 'xiaomozhang',
        admin: "xiaomozhang",
        id: '2021-10-10T09-14-49',
        distractionFreeMode: false  // Facebook-like distraction free mode
    });

    gitalk.render('gitalk-container');
</script>
    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;ä¸Šä¸€ç¯‡</div>
            <div class="card">
                <a href="/2021/10/11/golang-goarch-goos-mutiple-platform-build/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/8.jpg" class="responsive-img" alt="GoæœåŠ¡è·¨å¹³å°äº¤å‰ç¼–è¯‘æ‰“åŒ…ä¸è®¾ç½®ç‰ˆæœ¬å·">
                        
                        <span class="card-title">GoæœåŠ¡è·¨å¹³å°äº¤å‰ç¼–è¯‘æ‰“åŒ…ä¸è®¾ç½®ç‰ˆæœ¬å·</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            å‰è¨€  æœ€è¿‘åœ¨è´Ÿè´£ç»´æŠ¤å’Œå¼€å‘å®ˆæŠ¤è¿›ç¨‹ã€è¿è¥å¹³å°ç›‘æ§ã€è¿æ¥æ± ç­‰ç›¸å…³GoæœåŠ¡ï¼Œé¦–å…ˆå®ˆæŠ¤è¿›ç¨‹æœåŠ¡æ˜¯éƒ¨ç½²åœ¨å®¢æˆ·çš„windowså¹³å°ä¸‹è¿è¡Œ,å…¶å®ƒå¤§éƒ¨åˆ†æœåŠ¡éƒ½æ˜¯éƒ¨ç½²åœ¨linuxç¯å¢ƒä¸‹,é¦–å…ˆç°åœ¨é¢ä¸´çš„ä¸€ä¸ªé—®é¢˜å°±æ˜¯å¦‚æœåœ¨ä¸€å°æœºå™¨ä¸Šè¿›è¡Œè·¨å¹³å°äº¤å‰ç¼–è¯‘åå¯ä»¥åœ¨
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2021-10-11
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/golang%E8%B7%A8%E5%B9%B3%E5%8F%B0%E4%BA%A4%E5%8F%89%E7%BC%96%E8%AF%91/" class="post-category">
                                    golangè·¨å¹³å°äº¤å‰ç¼–è¯‘
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/Goarch%E3%80%81Goos%E3%80%81Cgo/">
                        <span class="chip bg-color">Goarchã€Goosã€Cgo</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                ä¸‹ä¸€ç¯‡&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2021/10/09/apollo-config-trip/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/17.jpg" class="responsive-img" alt="é›¶åŸºç¡€æ·±å…¥å­¦ä¹ æºç¨‹Apolloé…ç½®ä¸­å¿ƒ">
                        
                        <span class="card-title">é›¶åŸºç¡€æ·±å…¥å­¦ä¹ æºç¨‹Apolloé…ç½®ä¸­å¿ƒ</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            1:Apolloé…ç½®ä¸­å¿ƒç®€ä»‹Apolloï¼ˆé˜¿æ³¢ç½—ï¼‰æ˜¯æºç¨‹æ¡†æ¶éƒ¨é—¨ç ”å‘çš„é…ç½®ç®¡ç†å¹³å°ï¼Œèƒ½å¤Ÿé›†ä¸­åŒ–ç®¡ç†åº”ç”¨ä¸åŒç¯å¢ƒã€ä¸åŒé›†ç¾¤çš„é…ç½®ï¼Œé…ç½®ä¿®æ”¹åèƒ½å¤Ÿå®æ—¶æ¨é€åˆ°åº”ç”¨ç«¯ï¼Œå¹¶ä¸”å…·å¤‡è§„èŒƒçš„æƒé™ã€æµç¨‹æ²»ç†ç­‰ç‰¹æ€§ã€‚æœåŠ¡ç«¯åŸºäºSpring Bootå’ŒSprin
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2021-10-09
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/Java-Apollo-config/" class="post-category">
                                    Java Apollo config
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/distributed-config/">
                        <span class="chip bg-color">distributed config</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- ä»£ç å—åŠŸèƒ½ä¾èµ– -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>

<!-- ä»£ç è¯­è¨€ -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- ä»£ç å—å¤åˆ¶ -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- ä»£ç å—æ”¶ç¼© -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>


<!-- ä»£ç å—æŠ˜è¡Œ -->

<style type="text/css">
code[class*="language-"], pre[class*="language-"] { white-space: pre !important; }
</style>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;ç›®å½•</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC æ‚¬æµ®æŒ‰é’®. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* ä¿®å¤æ–‡ç« å¡ç‰‡ div çš„å®½åº¦. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // åˆ‡æ¢TOCç›®å½•å±•å¼€æ”¶ç¼©çš„ç›¸å…³æ“ä½œ.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>



    <footer class="page-footer bg-color">
    <div class="container row center-align" style="margin-bottom: 15px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            <span id="year">2017</span>
            <a href="http://xiaomozhang.github.io" target="_blank">å°å¼ å“¥</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
            &nbsp;<i class="fas fa-chart-area"></i>&nbsp;ç«™ç‚¹æ€»å­—æ•°:&nbsp;<span
                class="white-color">130.5k</span>&nbsp;å­—
            
            
            
            
            
            
            <span id="busuanzi_container_site_pv">
                |&nbsp;<i class="far fa-eye"></i>&nbsp;æ€»è®¿é—®é‡:&nbsp;<span id="busuanzi_value_site_pv"
                    class="white-color"></span>&nbsp;æ¬¡
            </span>
            
            
            <span id="busuanzi_container_site_uv">
                |&nbsp;<i class="fas fa-users"></i>&nbsp;æ€»è®¿é—®äººæ•°:&nbsp;<span id="busuanzi_value_site_uv"
                    class="white-color"></span>&nbsp;äºº
            </span>
            
            <br>
            
            <span id="sitetime">è½½å…¥è¿è¡Œæ—¶é—´...</span>
            <script>
                function siteTime() {
                    var seconds = 1000;
                    var minutes = seconds * 60;
                    var hours = minutes * 60;
                    var days = hours * 24;
                    var years = days * 365;
                    var today = new Date();
                    var startYear = "2017";
                    var startMonth = "09";
                    var startDate = "5";
                    var startHour = "0";
                    var startMinute = "0";
                    var startSecond = "0";
                    var todayYear = today.getFullYear();
                    var todayMonth = today.getMonth() + 1;
                    var todayDate = today.getDate();
                    var todayHour = today.getHours();
                    var todayMinute = today.getMinutes();
                    var todaySecond = today.getSeconds();
                    var t1 = Date.UTC(startYear, startMonth, startDate, startHour, startMinute, startSecond);
                    var t2 = Date.UTC(todayYear, todayMonth, todayDate, todayHour, todayMinute, todaySecond);
                    var diff = t2 - t1;
                    var diffYears = Math.floor(diff / years);
                    var diffDays = Math.floor((diff / days) - diffYears * 365);
                    var diffHours = Math.floor((diff - (diffYears * 365 + diffDays) * days) / hours);
                    var diffMinutes = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours) /
                        minutes);
                    var diffSeconds = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours -
                        diffMinutes * minutes) / seconds);
                    if (startYear == todayYear) {
                        document.getElementById("year").innerHTML = todayYear;
                        document.getElementById("sitetime").innerHTML = "æœ¬ç«™å·²å®‰å…¨è¿è¡Œ " + diffDays + " å¤© " + diffHours +
                            " å°æ—¶ " + diffMinutes + " åˆ†é’Ÿ " + diffSeconds + " ç§’";
                    } else {
                        document.getElementById("year").innerHTML = startYear + " - " + todayYear;
                        document.getElementById("sitetime").innerHTML = "æœ¬ç«™å·²å®‰å…¨è¿è¡Œ " + diffYears + " å¹´ " + diffDays +
                            " å¤© " + diffHours + " å°æ—¶ " + diffMinutes + " åˆ†é’Ÿ " + diffSeconds + " ç§’";
                    }
                }
                setInterval(siteTime, 1000);
            </script>
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/xiaomozhang" class="tooltipped" target="_blank" data-tooltip="è®¿é—®æˆ‘çš„GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:zhangyide7@gmail.com" class="tooltipped" target="_blank" data-tooltip="é‚®ä»¶è”ç³»æˆ‘" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>



    <a href="https://www.facebook.com/yide.zhang.3998" class="tooltipped" target="_blank" data-tooltip="å…³æ³¨æˆ‘çš„Facebook: https://www.facebook.com/yide.zhang.3998" data-position="top" data-delay="50">
        <i class="fab fa-facebook-f"></i>
    </a>



    <a href="https://twitter.com/zhangyide7" class="tooltipped" target="_blank" data-tooltip="å…³æ³¨æˆ‘çš„Twitter: https://twitter.com/zhangyide7" data-position="top" data-delay="50">
        <i class="fab fa-twitter"></i>
    </a>



    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=1678658351" class="tooltipped" target="_blank" data-tooltip="QQè”ç³»æˆ‘: 1678658351" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>







    <a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS è®¢é˜…" data-position="top" data-delay="50">
        <i class="fas fa-rss"></i>
    </a>

</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- æœç´¢é®ç½©æ¡† -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;æœç´¢</span>
            <input type="search" id="searchInput" name="s" placeholder="è¯·è¾“å…¥æœç´¢çš„å…³é”®å­—"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script src="/js/search.js"></script>
<script type="text/javascript">
$(function () {
    searchFunc("/" + "search.xml", 'searchInput', 'searchResult');
});
</script>
    <!-- å›åˆ°é¡¶éƒ¨æŒ‰é’® -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    <!-- Global site tag (gtag.js) - Google Analytics -->


    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

    

    

    
    <script type="text/javascript" src="/libs/background/ribbon-dynamic.js" async="async"></script>
    
    
    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>
